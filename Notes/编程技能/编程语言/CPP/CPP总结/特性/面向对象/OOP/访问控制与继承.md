# 一. protected 成员

如前所述，一个类使用`protected`关键字来声明那些它希望与派生类分享但是不想被其他公共访问的成员。`protected`可以看做是`public`和`private`中和后的产物：

- 和私有成员类似，受保护的成员对于类的用户来说是不可访问的
- 和共有成员类似，受保护的成员对于派生类的友元来说是可访问的

此外，`protected`还有另外一条重要的性质：

- 派生类的成员或友元只能通过**派生类对象**来访问基类的受保护成员。派生类对于一个**基类对象**中的受保护成员没有任何访问特权



# 二. 继承访问控制

访问控制符除了可以限制成员的权限之外，还可以限制基类整体的权限。

对于一个派生类来说，该类对其继承而来的成员的访问权限受到两个因素影响：一是在基类中该成员的访问说明符，二是在派生类的派生列表中的访问说明符。

我们以下面的代码为例：

```c++
class Base {
public:
    int pub_mem;
protected:
    double prot_mem;
private:
    char priv_mem;
};

struct Pub_Derv : public Base {
    int f1() { return pub_mem; }
    double g1() { return prot_mem; }
    char h1() { return priv_mem; }
};

struct Prot_Derv : protected Base {
    int f2() { return pub_mem; }
    double g2() { return prot_mem; }
    char h2() { return priv_mem; }
};

struct Priv_Derv : private Base {
    int f3() { return pub_mem; }
    double g3() { return prot_mem; }
    char h3() { return priv_mem; }
};
```

首先我们定义了一个基类，包含三个不同访问权限的成员。然后我们定义了三个派生类，分别用不同的权限控制符继承了基类，然后我们在每个派生类中尝试访问基类中的每个成员。

****

先说结论，对于派生类来说，不论继承时的访问控制符是什么，都不会影响该派生类对基类成员的访问权限，即**每个派生类都能访问基类的`public`和`protected`成员，但是不能访问`private`成员**。

实际上在继承时的访问控制符是控制所有**派生类用户**（包括该派生类的派生类）对于**基类成员**的访问权限。

在理解这点之前我们需要清楚一个**类成员的访问控制符控制了什么权限**：

- 对于该类的对象而言，它只能访问该类的`public`成员，而不能访问`protected`和`private`成员
- 对于该类的派生类而言，它只能访问该类的`public`和`protected`成员，而不能访问`private`成员。

****

而继承时的访问控制符控制的是派生类中基类成员的访问权限：

- 对于`public`继承，基类中的成员将保持它们的访问权限。就相当于把所有基类成员包括访问控制符全部抄写了一遍到派生类中（当然派生类仍然不具有访问基类中`private`成员的能力）。
- 对于`private`继承，基类中的所有成员在派生类中都将变为`private`的
- 对于`protected`继承，基类中的所有`public`成员在派生类中都将变为`protected`的