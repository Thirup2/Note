# 一. 构造 string 的其他方法

如下表所示：

| 操作                       | 描述                                                         |
| -------------------------- | ------------------------------------------------------------ |
| `string s(cp, n)`          | `s`是`cp`指向的数组中前`n`个字符的拷贝。此数组至少应该包含`n`个字符 |
| `string s(s2, pos2)`       | `s`是`string s2`从下标`pos2`开始的字符的拷贝。若`pos2 > s2.size()`，构造函数的行为未定义 |
| `string s(s2, pos2, len2)` | `s`是`string s2`从下标`pos2`开始`len2`个字符的拷贝。<br />若`pos2 > s2.size()`，构造函数的行为未定义。<br />不管`len2`的值是多少，构造函数至多拷贝`s2.size() - pos2`个字符 |



# 二. 获取子字符串

| 操作               | 描述                                                         |
| ------------------ | ------------------------------------------------------------ |
| `s.substr(pos, n)` | 返回一个`string`，包含`s`中从`pos`开始的`n`个字符的拷贝。<br />`pos`的默认值为 0。`n`的默认值为`s.size() - pos`，即拷贝从`pos`开始的所有字符 |



# 三. 改变 string 的其他方法

| 操作                     | 描述                                                         |
| ------------------------ | ------------------------------------------------------------ |
| `s.insert(pos, args)`    | 在`pos`之前插入`args`指定的字符。`pos`可以是一个下标或一个迭代器。<br />接受下标的版本返回一个指向`s`的引用；<br />接受迭代器的版本返回指向第一个插入字符的迭代器 |
| `s.erase(pos, len)`      | 删除从位置`pos`开始的`len`个字符。如果`len`被省略，则删除从`pos`开始直到`s`末尾的所有字符。<br />返回一个指向`s`的引用 |
| `s.assign(args)`         | 将`s`中的字符替换为`args`指定的字符。<br />返回一个指向`s`的引用 |
| `s.append(args)`         | 将`args`追加到`s`。返回一个指向`s`的引用                     |
| `s.replace(range, args)` | 删除`s`中范围`range`内的字符，替换为`args`指定的字符。<br />`range`可以是一个下标和一个长度，或者是一对指向`s`的迭代器。<br />返回一个指向`s`的引用 |

****

**注**：

- `append`和`assign`的`args`参数可以是下面的任何一项：

  - `str`：字符串`str`
  - `str`，`pos`，`len`：`str`中从`pos`开始最多`len`个字
  - `cp`，`len`：从`cp`指向的字符数组的前（最多）`len`个字符
  - `cp`：`cp`指向的以空字符结尾的字符数组
  - `n`，`c`：`n`个字符`c`
  - `b`，`e`：迭代器`b`和`e`指定的范围内的字符
  - 初始化列表：花括号包围的，以逗号分隔的字符列表

- `replace`和`insert`所允许的`args`形式依赖于`range`和`pos`是如何指定的：

  | `args`形式          | `replace(pos, len, args)` | `replace(b, e, args)` | `insert(pos, args)` | `insert(iter, args)` |
  | ------------------- | ------------------------- | --------------------- | ------------------- | -------------------- |
  | `str`               | 是                        | 是                    | 是                  | 否                   |
  | `str`，`pos`，`len` | 是                        | 否                    | 是                  | 否                   |
  | `cp`，`len`         | 是                        | 是                    | 是                  | 否                   |
  | `cp`                | 是                        | 是                    | 否                  | 否                   |
  | `n`，`c`            | 是                        | 是                    | 是                  | 是                   |
  | `b2, e2`            | 否                        | 是                    | 否                  | 是                   |
  | 初始化列表          | 否                        | 是                    | 否                  | 是                   |

****



# 四. string 搜索操作

`string`类提供了 6 个不同的搜索函数，每个函数都有 4 个重载版本。

每个搜索操作都返回一个`string::size_type`值，表示匹配发生位置的下标；如果搜索失败，则返回一个名为`string::npos`的`static`成员。

标准库将`npos`定义为一个`const string::size_type`类型，并初始化为值 -1。由于`npos`是一个`unsigned`类型，此初始值意味着`npos`等于任何`string`最大的可能大小。

| 操作                        | 描述                                              |
| --------------------------- | ------------------------------------------------- |
| `s.find(args)`              | 查找`s`中`args`第一次出现的位置                   |
| `s.rfind(args)`             | 查找`s`中`args`最后一次出现的位置                 |
| `s.find_first_of(args)`     | 在`s`中查找`args`中任何一个字符第一次出现的位置。 |
| `s.find_last_of(args)`      | 在`s`中查找`args`中任何一个字符最后一次出现的位置 |
| `s.find_first_not_of(args)` | 在`s`中查找第一个不在`args`中的字符               |
| `s.find_last_not_of(args)`  | 在`s`中查找最后一个不在`args`中的字符             |

****

**注**：

- `args`必须是以下形式之一：
  - `c`，`pos`：从`s`中位置`pos`开始查找字符`c`。`pos`默认为 0
  - `s2`，`pos`：从`s`中位置`pos`开始查找字符串`s2`。`pos`默认为 0
  - `cp`，`pos`：从`s`中位置`pos`开始查找指针`cp`指向的以空字符结尾的 C 风格字符串。`pos`默认为 0
  - `cp`，`pos`，`n`：从`s`中位置`pos`开始查找指针`cp`指向的数组的前`n`个字符。`pos`和`n`无默认值

****



# 五. compare 操作

除了关系运算符之外，标准库`string`类型还提供了一组`compare`函数，这些函数与 C 标准库的`strcmp`函数很相似。根据`s`是等于、大于还是小于参数指定的字符串，`s.compare`返回 0、正数或负数。

| 操作                                | 描述                                                         |
| ----------------------------------- | ------------------------------------------------------------ |
| `s.compare(s2)`                     | 比较`s`和`s2`                                                |
| `s.compare(pos1, n1, s2)`           | 将`s`中从`pos1`开始的`n1`个字符与`s2`进行比较                |
| `s.compare(pos1, n1, s2, pos2, n2)` | 将`s`中从`pos1`开始的`n1`个字符与`s2`中从`pos2`开始的`n2`个字符进行比较 |
| `s.compare(cp)`                     | 比较`s`与`cp`指向的以空字符结尾的字符数组                    |
| `s.compare(pos1, n1, cp)`           | 将`s`中从`pos1`开始的`n1`个字符与`cp`指向的以空字符结尾的字符数组进行比较 |
| `s.compare(pos1, n1, cp, n2)`       | 将`s`中从`pos1`开始的`n1`个字符与指针`cp`指向的地址开始的`n2`个字符进行比较 |



# 六. 数值转换

`string`类型提供了一组功能，可以将任何**算术类型**转换为`string`字符串，同时提供将字符串转换为算术类型的功能：

| 操作                                                         | 描述                                                         |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| `to_string(val)`                                             | 一组重载函数，返回数值`val`的`string`表示。<br />`val`可以是任何算术类型。对每个浮点类型和`int`或更大的整型，都有相应版本的`to_string`。<br />与往常一样，小整型会被提升 |
| `stoi(s, p, b)`<br />`stol(s, p, b)`<br />`stoul(s, p, b)`<br />`stoll(s, p, b)`<br />`stoull(s, p, b)` | 返回`s`的起始子串（表示整数内容）的数值<br />返回值类型分别是：`int`、`long`、`unsigned long`、`long long`、`unsigned long long`<br />`b`表示转换所用的基数，默认值是 10（即十进制）<br />`p`是`size_t`指针，用来保存`s`中第一个非数值字符的下标，`p`默认为 0，即函数不保存下标 |
| `stof(s, p)`<br />`stod(s, p)`<br />`stold(s, p)`            | 返回`s`的起始子串（表示浮点数内容）的数值<br />返回值类型分别是`float`、`double`或`long double`。<br />参数`p`的作用与整数转换函数中一样 |