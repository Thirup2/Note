# 一. 总览
## 1. 操纵流I/O：
1. 程序为必须同时处于活动状态的每个文件声明一个指针变量，其类型为`FILE*`。这个指针指向这个`FILE`结构，当它处于活动状态时由流使用。
2. 流通过调用`fopen`函数打开。为了打开一个流，必须指定需要访问的文件或设备以及它们的访问方式（例如，读、写或者既读又写）。`fopen`向操作系统验证文件或设备确实存在（在有些操作系统中，还会验证是否允许执行所指定的访问方式）并初始化`FILE`结构
3. 根据需要对该文件进行读取或写入。
4. 调用`fclose`函数关闭流。关闭一个流可以防止与它相关联的文件被再次访问，保证任何存储于缓冲区的数据被正确地写到文件中，并且释放`FILE`结构，以使它可以用于另外的文件。

- 标准流的I/O更为简单，因为它们并不需要打开或关闭。

## 2. 不同I/O形式的函数或函数家族
- 函数或函数家族名（函数家族名为斜体，函数名为黑体）

|数据类型|输入|输出|描述|
|:-:|:-:|:-:|:-:|
|字符|*getchar*|*putchar*|读取/写入单个字符|
|文本行|*gets*、*scanf*|*puts*、*printf*|文本行未格式化的输入/输出、格式化的输入/输出|
|二进制数据|**fread**|**fwrite**|读取/写入二进制数据|

- 具体的函数

|家族名|目的|可用于所有的流|只用于`stdin`和`stdout`|内存中的字符串|
|:--:|:---:|:---:|:---:|:----:|
|*getchar*|字符输入|**fgetc**、**getc**|**getchar**|①|
|*putchar*|字符输出|**fputc**、**putc**|**putchar**|①|
|*gets*|文本行输入|**fgets**|**gets**|②|
|*puts*|文本行输出|**fputs**|**puts**|②|
|*scanf*|格式化输入|**fscanf**|**scanf**|**sscanf**|
|*printf*|格式化输出|**fprintf**|**printf**|**sprintf**|

①：对指针使用下标引用或间接访问操作从内存获得一个字符（或向内存写入一个字符）
②：使用`strcpy`函数从内存读取文本行（或向内存写入文本行）

# 二. 打开流
## 1. fopen
`fopen`函数打开一个特定的文件，并把一个流和这个文件相关联。它的原型如下：
```c
FILE *fopen(char const *name, char const *mode);
```
- 参数：两个参数都是字符串。`name`是希望打开的文件或设备的名字。创建文件名的规则在不同的系统中可能各不相同，所以`fopen`把文件名作为一个字符串而不是作为路径名、驱动器字母、文件扩展名等并准备一个参数。这个参数指定要打开的文件——FILE*变量的名字供程序用来保存`fopen`的返回值。它并不影响哪个文件被打开。`mode`参数提示流是用于只读、只写还是既读又写，以及它是文本流还是二进制流。以下是一些常用的模式：

    ||读取|写入|添加|
    |:-:|:-:|:-:|:-:|
    |文本|`"r"`|`"w"`|`"a"`|
    |二进制|`"rb"`|`"wb"`|`"ab"`|

    - 如果一个打开的文件是用于读取，那么它必须原先已经存在
    - 如果一个打开的文件使用于写入，如果它原先已经存在，那么它原来的内容就会被删除。如果它原先不存在，那么它将被创建。
    - 如果一个打开的用于添加的文件原先并不存在，那么它将被创建。如果他原先已经存在，则原先的内容并不会被删除。
    - 无论哪一种情况，数据只能从文件的尾部写入。
    - 如果`mode`为`"a"`或`"ab"`表示打开该文件用于更新，并且流既允许读也允许写。但是，如果已经从该文件读入了一些数据，那么在开始向它写入数据之前，必须调用其中一个文件定位函数（`fseek`、`fsetpos`、`rewind`）。在向文件写入一些数据之后，如果又想从该文件读取一些数据，则首先必须调用`fflush`函数或者文件定位函数之一
- 返回值：如果`fopen`函数执行成功，它将返回一个指向`FILE`结构的指针，该结构代表这个新创建的流。如果函数执行失败，它就返回一个NULL指针，`errno`会提示问题的性质
    - **注意**：应该始终检查`fopen`函数的返回值
## 2. freopen
`freopen`函数用于打开（或重新打开）一个特定的文件流。它的原型如下：
```c
FILE *freopen(char const *filename, char const *mode, FILE *stream);
```
- 参数：最后1个参数就是需要打开的流。它可能是一个先前从`fopen`函数返回的流，也可能是标准流
- 操作：这个函数首先试图关闭这个流，然后用指定的文件和模式重新打开这个流。
- 返回值：如果打开失败，函数返回一个NULL值。如果打开成功，函数就返回它的第3个参数值

# 三. 关闭流
流通过函数`fclose`关闭，它的原型如下：
```c
int fclose(FILE *f);
```
- 参数：需要关闭的流
- 操作：关闭一个流。对于输出流，`fclose`函数在文件关闭之前刷新缓冲区
- 返回值：如果它执行成功，`fclose`返回零值，否则返回EOF
- **注意**：如果关闭流操作成功和操作失败之后面临着不同的选择，那就应该进行错误检查