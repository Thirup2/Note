---
title: 定制操作
---

很多算法都需要迭代器指向的元素类型支持某些操作，例如`<`运算符、`==`运算符等等。

实际上，标准库还为这些算法定义了额外的版本，允许我们提供自己定义的操作来代替默认运算符。

例如，`sort`算法默认使用元素类型的`<`运算符，但可能我们希望的排序顺序与`<`所定义的顺序不同，或是我们的序列可能保存的是未定义`<`运算符的元素类型。在这两种情况下，都需要重载`sort`的默认行为。

## 一、可调用对象

在 C++ 中有以下几种类型的可调用对象：

- 普通函数
- 函数指针：包括正常函数指针和类的成员函数指针
- 仿函数：仿函数是一个类，它重载了`operator()`运算符
- lambda 表达式：一个 lambda 表达式实际上是一个默认仿函数类型的对象



## 二、向算法传递可调用对象

很多算法都允许多接受一个参数，这个额外的参数是一个**可调用对象**。

其中函数指针、仿函数或 lambda 表达式都可以作为算法的额外参数传入算法。而普通函数由于不能作为参数拷贝，所以不能作为算法的额外参数传入。

### 1. 谓词

谓词是一个可调用的表达式，其返回结果是一个能用作条件的值。

标准库算法所使用的谓词分为两类：**一元谓词**（只接受单一参数）和**二元谓词**（接受两个参数）。

接受谓词参数的算法对输入序列中的元素调用谓词。因此，元素类型必须能转换为谓词的参数类型。

例如，接受一个二元谓词参数的`sort`版本用这个谓词来代替`<`来比较元素。此操作需要满足接受两个参数并返回一个`bool`值的要求，其执行的操作需要能够将输入序列中所有可能的元素值上定义一个一致的序。



### 2. lambda 表达式

如果只使用函数指针来作为谓词传入算法，那么这样的函数只能接受 1 个或 2 个参数（具体根据算法而定），而不能再接受更多的参数了。

如果需要传入比规定参数更多的参数，就只有用 lambda 表达式了。

lambda 的具体内容参见 [lambda 表达式](lambda%20表达式/)