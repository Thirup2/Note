---
title: 表达式
---

## 一、简介

**表达式**由一个或多个**运算对象**组成，对表达式求值将得到一个**结果**，字面值和变量是最简单的表达式，其结果就是字面值和变量的值。把一个**运算符**和一个或多个运算对象组合起来可以生成比较复杂的表达式。

C++ 定义了**一元运算符**和**二元运算符**，以及一个**三元运算符**。并且有些相同的运算符表示不同的含义。

另外，表达式可以进行组合从而变成复杂的表达式。一个复杂的表达式中包含了多个运算符，想要得出这个表达式的值我们需要理解运算符的**优先级**、**结合律**以及运算对象的**求值顺序**，另外还有一些运算对象的默认类型转换。

在 C++ 中，我们可以在自定义类中重新定义运算符作用在自定义类对象上时的含义，称为运算符的重载，被重载的运算符称作**重载运算符**。例如标准 IO 库中的`<<`和`>>`运算符。



## 二、值的类型

在表达式中有两种值的类型：**左值**（lvalue）和**右值**（rvalue）。不同的运算符对运算对象的要求各不相同，有的需要左值运算对象，有的需要右值运算对象。返回值也有差异，有的返回左值结果，有的返回右值结果。

一个左值表达式的求值结果一定是一个对象或者一个函数。但一个对象或者函数可能是一个右值而非左值。

简单来说，当一个对象在内存中的地址能够被使用时，它就是一个左值，其余情况就是右值。通常在需要右值的地方可以使用左值来代替，因为左值在内存中的位置可以使用，其值也可以使用，而右值则不一定可以当作左值使用，例如字面值常量只有其值可以使用，而不能访问或改变其在内存中的位置（即内存中的位置不可用，也即无法作为左值使用）。

:::info C 语言中的左值和右值

C++ 中左值和右值这两个名词实际继承自 C 语言，原本是为了帮助记忆：左值可以位于赋值语句的左侧，右值则不能位于赋值语句的左侧。

在 C++ 中这两个词实际的含义和原本的含义有所不同。在 C 语言中判断方法非常简单，以常量对象为例，由于不能将其放在赋值语句左侧，所以这是一个 C 语言中的右值而不是左值。而在 C++ 中，一个常量对象在内存中的地址能够被使用（如取地址操作`&c`），所以这是一个 C++ 中的左值但却不能放在赋值语句的左边。

在 C++ 中值的类型的概念与表达式息息相关，一个运算符所接受的运算对象和返回的值都明确了其值的类型。

:::
