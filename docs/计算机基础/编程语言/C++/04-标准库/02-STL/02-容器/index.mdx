---
title: 容器
---

## 一、概述

容器是 C++ 提供的一组数据结构，用来保存一些特定类型对象的集合。

包括顺序容器和关联容器，其中关联容器又分为有序容器和无序容器，而顺序容器中又包含 3 个容器适配器，这些都是容器类型。

而容器类型之上的操作主要分为了以下几种层次：

- 所有容器类型都提供的操作（部分操作对某些容器特殊）
- 仅针对顺序容器、关联容器或无序容器的操作
- 只适用于一小部分容器的操作

此处列出第一层次的操作，即通用操作。



## 二、通用操作及类型

- **类型别名**

  | 类型别名                 | 含义                                                         |
  | ------------------------ | ------------------------------------------------------------ |
  | `iterator`               | 此容器类型的迭代器类型                                       |
  | `const_iterator`         | 可以读取元素，但不能修改元素的迭代器类型                     |
  | `size_type`              | 无符号整数类型，足够保存此种容器类型最大可能容器的大小       |
  | `difference_type`        | 带符号整数类型，足够保存两个迭代器之间的距离                 |
  | `value_type`             | 元素类型                                                     |
  | `reference`              | 元素的左值类型；与`value_type&`含义相同                      |
  | `const_reference`        | 元素的`const`左值类型                                        |
  | `reverse_iterator`       | 反向迭代器（<Highlight color="#25c2a0">forward_list 不支持</Highlight>） |
  | `const_reverse_iterator` | 常量反向迭代器（<Highlight color="#25c2a0">forward_list 不支持</Highlight>） |

- 构造函数

  | 构造函数            | 效果                                                         |
  | ------------------- | ------------------------------------------------------------ |
  | `C c`               | 默认构造函数，构造空容器                                     |
  | `C c1(c2)`          | 构造`c2`的拷贝`c1`。非`explicit`，故可拷贝                   |
  | `C c(b, e)`         | 构造`c`，将迭代器`b`和`e`指定的范围内的元素拷贝到`c`（<Highlight color="#25c2a0">array 不支持</Highlight>） |
  | `C c{a, b, c, ...}` | 列表初始化`c`。非`explicit`，故可拷贝                        |

  注：`array`类型的实例化需要额外提供一个参数，即数组大小，这也是类型的一部分：

  ```cpp
  array<int, 42> ivec;			// 保存 42 个 int 的数组
  array<int, 42>::size_type i;	// 使用该类型时必须包含数组大小
  ```

- 赋值与 swap

  | 操作                  | 效果                                                         |
  | --------------------- | ------------------------------------------------------------ |
  | `c1 = c2`             | 将`c1`中的元素替换为`c2`中元素                               |
  | `c1 = {a, b, c, ...}` | 将`c1`中的元素替换为列表中元素（<Highlight color="#25c2a0">array 不支持</Highlight>） |
  | `a.swap(b)`           | 交换`a`与`b`的元素                                           |
  | `swap(a, b)`          | 与`a.swap(b)`等价                                            |

- 大小

  | 操作           | 效果                                                         |
  | -------------- | ------------------------------------------------------------ |
  | `c.size()`     | `c`中元素的数目（<Highlight color="#25c2a0">forward_list 不支持</Highlight>） |
  | `c.max_size()` | `c`可保存的最大元素数目                                      |
  | `c.empty()`    | 若`c`为空返回`true`，否则返回`false`                         |

- 添加/删除元素（<Highlight color="#25c2a0">array 不支持</Highlight>）

  | 操作               | 效果                            |
  | ------------------ | ------------------------------- |
  | `c.insert(args)`   | 将`args`中的元素拷贝进`c`       |
  | `c.emplace(inits)` | 使用`inits`构造`c`中的一个元素  |
  | `c.erase(args)`    | 删除`args`指定的元素            |
  | `c.clear()`        | 删除`c`中的所有元素，返回`void` |

  注：`args`与`inits`见具体位置处的定义

- 关系运算符

  | 操作                 | 效果                             |
  | -------------------- | -------------------------------- |
  | `==`、`!=`           | 相等性判断                       |
  | `<`、`<=`、`>`、`>=` | 关系运算符（无序关联容器不支持） |

  注：容器的关系运算符使用元素的关系运算符完成比较。元素至少需要定义了`==`和`<`运算符。

- 迭代器

  | 操作                       | 效果                                                         |
  | -------------------------- | ------------------------------------------------------------ |
  | `c.begin()`、`c.end()`     | 返回指向`c`的首元素和尾元素之后位置的迭代器                  |
  | `c.cbegin()`、`c.cend()`   | 返回`const_iterator`                                         |
  | `c.rbegin()`、`c.rend()`   | 返回指向`c`的尾元素和首元素之前位置的迭代器（<Highlight color="#25c2a0">forward_list 不支持</Highlight>） |
  | `c.crbegin()`、`c.crend()` | 返回`const_reverse_iterator`（<Highlight color="#25c2a0">forward_list 不支持</Highlight>） |
