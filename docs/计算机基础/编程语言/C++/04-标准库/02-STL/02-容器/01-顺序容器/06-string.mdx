## 一、类型别名

| 类型别名                 | 含义                                                   |
| ------------------------ | ------------------------------------------------------ |
| `iterator`               | 此容器类型的迭代器类型                                 |
| `const_iterator`         | 可以读取元素，但不能修改元素的迭代器类型               |
| `size_type`              | 无符号整数类型，足够保存此种容器类型最大可能容器的大小 |
| `difference_type`        | 带符号整数类型，足够保存两个迭代器之间的距离           |
| `value_type`             | 元素类型                                               |
| `reference`              | 元素的左值类型；与`value_type&`含义相同                |
| `const_reference`        | 元素的`const`左值类型                                  |
| `reverse_iterator`       | 反向迭代器                                             |
| `const_reverse_iterator` | 常量反向迭代器                                         |



## 二、构造函数

| 构造函数                   | 效果                                                         |
| -------------------------- | ------------------------------------------------------------ |
| `C c`                      | 默认构造函数，构造空容器                                     |
| `C c1(c2)`                 | 构造`c2`的拷贝`c1`。非`explicit`，故可拷贝                   |
| `C c(b, e)`                | 构造`c`，将迭代器`b`和`e`指定的范围内的元素拷贝到`c`         |
| `C c{a, b, c, ...}`        | 列表初始化`c`。非`explicit`，故可拷贝                        |
| `C seq(n, t)`              | `seq`包含`n`个初始化为值`t`的元素                            |
| `string s(cp)`             | `s`是`cp`指向的 C 风格字符串中不包含末尾空字符的拷贝。非`explicit`，故可拷贝 |
| `string s(cp, n)`          | `s`是`cp`指向的数组中前`n`个字符的拷贝。<br />此数组至少应该包含`n`个字符 |
| `string s(s2, pos2)`       | `s`是`string s2`从下标`pos2`开始的字符的拷贝。<br />若`pos2>s2.size()`，构造函数的行为未定义 |
| `string s(s2, pos2, len2)` | `s`是`string s2`从下标`pos2`开始`len2`个字符的拷贝。<br />若`pos2>s2.size()`，构造函数的行为未定义。<br />不管`len2`的值是多少，构造函数至多拷贝`s2.size()-pos2`个字符 |



## 三、其他操作

### 1. 迭代器

| 操作                       | 效果                                        |
| -------------------------- | ------------------------------------------- |
| `c.begin()`、`c.end()`     | 返回指向`c`的首元素和尾元素之后位置的迭代器 |
| `c.cbegin()`、`c.cend()`   | 返回`const_iterator`                        |
| `c.rbegin()`、`c.rend()`   | 返回指向`c`的尾元素和首元素之前位置的迭代器 |
| `c.crbegin()`、`c.crend()` | 返回`const_reverse_iterator`                |



### 2. 赋值与 swap

| 操作                  | 效果                                                         |
| --------------------- | ------------------------------------------------------------ |
| `c1 = c2`             | 将`c1`中的元素替换为`c2`中元素                               |
| `c1 = {a, b, c, ...}` | 将`c1`中的元素替换为列表中元素                               |
| `a.swap(b)`           | 交换`a`与`b`的元素                                           |
| `swap(a, b)`          | 与`a.swap(b)`等价                                            |
| `seq.assign(b, e)`    | 将`seq`中的元素替换为迭代器`b`和`e`所表示范围内的元素。迭代器`b`和`e`不能指向`seq`中的元素 |
| `seq.assign(il)`      | 将`seq`中的元素替换为初始化列表（`initializer_list`）`il`中的元素 |
| `seq.assign(n, t)`    | 将`seq`中的元素替换为`n`个值为`t`的元素                      |



### 3. 容量与大小

| 操作                | 效果                                                         |
| ------------------- | ------------------------------------------------------------ |
| `c.size()`          | `c`中元素的数目                                              |
| `c.max_size()`      | `c`可保存的最大元素数目                                      |
| `c.empty()`         | 若`c`为空返回`true`，否则返回`false`                         |
| `c.resize(n)`       | 调整`c`的大小为`n`个元素。<br />若`n<c.size()`，则多出的元素被丢弃。若必须添加新元素，对新元素进行值初始化 |
| `c.resize(n, t)`    | 调整`c`的大小为`n`个元素。<br />任何新添加的元素都初始化为值`t` |
| `c.shrink_to_fit()` | 请求将`capacity()`减少为与`size()`相同的大小，具体实现可以忽略此请求。 |
| `c.capacity()`      | 返回当前容器的容量                                           |
| `c.reserve(n)`      | 分配至少能容纳`n`个元素的内存空间，只有当`n>size()`时才重新分配 |



### 4. 增删操作

| `c.push_back(t)`<br />`c.emplace_back(args)` | 在`c`的尾部创建一个值为`t`或由`args`创建的元素。返回`void`   |
| -------------------------------------------- | ------------------------------------------------------------ |
| `c.insert(p, t)`<br />`c.emplace(p, args)`   | 在迭代器`p`指向的元素之前创建一个值为`t`或由`args`创建的元素<br />返回指向新添加的元素的迭代器 |
| `c.insert(p, n, t)`                          | 在迭代器`p`指向的元素之前插入`n`个值为`t`的元素。<br />返回指向新添加的第一个元素的迭代器；若`n`为 0，返回`p` |
| `c.insert(p, b, e)`                          | 将迭代器`b`和`e`指定范围内的元素插入到迭代器`p`指向的元素之前。`b`和`e`不能指向`c`中的元素。<br />返回指向新添加的第一个元素的迭代器；若范围为空，则返回`p` |
| `c.insert(p, il)`                            | `il`是一个`initializer_list`的元素值列表。将这些给定值插入到迭代器`p`指向的元素之前。<br />返回指向新添加的第一个元素的迭代器，若列表为空，则返回`p` |
| `c.pop_back()`                               | 删除`c`中尾元素。若`c`为空，函数行为未定义。返回`void`       |
| `c.erase(p)`                                 | 删除迭代器`p`所指定的元素，返回一个指向被删元素之后元素的迭代器<br />若`p`指向尾元素，则返回尾后迭代器。<br />若`p`是尾喉迭代器，则函数行为未定义 |
| `c.erase(b, e)`                              | 删除迭代器`b`和`e`所指范围内的元素，返回一个指向最后一个被删元素之后元素的迭代器<br />若`e`本身就是尾后迭代器，则函数也返回尾后迭代器 |
| `c.clear()`                                  | 删除`c`中所有元素。返回`void`                                |

**字符串特殊增删操作**：

| 操作                     | 效果                                                         |
| ------------------------ | ------------------------------------------------------------ |
| `s.insert(pos, args)`    | 在`pos`之前插入`args`指定的字符。<br />`pos`可以是一个下标或一个迭代器。<br />接受下标的版本返回一个指向`s`的引用；接受迭代器的版本返回指向第一个插入字符的迭代器 |
| `s.erase(pos, len)`      | 删除从位置`pos`开始的第`len`个字符。如果`len`被省略，则删除从`pos`开始直至`s`末尾的所有字符。<br />返回一个指向`s`的引用 |
| `s.assign(args)`         | 将`s`中的字符替换为`args`指定的字符。<br />返回一个指向`s`的引用 |
| `s.append(args)`         | 将`args`追加到`s`。<br />返回一个指向`s`的引用。             |
| `s.replace(range, args)` | 删除`s`中范围`range`内的字符，替换为`args`指定的字符。<br />`range`可以是一个下标+一个长度，或者是一对指向`s`的迭代器。<br />返回一个指向`s`的引用 |

此表中的操作中所使用的`args`具体有下面这些情况：

- 对于`append`和`assign`，`args`可以是下列任何形式

  - `str`：字符串`str`，不能和`s`相同
  - `str`，`pos`，`len`：`str`中从`pos`开始最多`len`个字
  - `cp`，`len`：从`cp`指向的字符数组的前（最多）`len`个字符
  - `cp`：`cp`指向的以空字符结尾的字符数组
  - `n`，`c`：`n`个字符`c`
  - `b`，`e`：迭代器`b`和`e`指定的范围内的字符
  - 初始化列表：花括号包围的，以逗号分隔的字符列表

- 对于`insert`和`replace`，`args`的情况如下表所示：

  | `args`可以是    | `replace(pos, len, args)` | `replace(b, e, args)` | `insert(pos, args)` | `insert(iter, args)` |
  | --------------- | ------------------------- | --------------------- | ------------------- | -------------------- |
  | `str`           | 是                        | 是                    | 是                  | 否                   |
  | `str, pos, len` | 是                        | 否                    | 是                  | 否                   |
  | `cp, len`       | 是                        | 是                    | 是                  | 否                   |
  | `cp`            | 是                        | 是                    | 否                  | 否                   |
  | `n, c`          | 是                        | 是                    | 是                  | 是                   |
  | `b2, e2`        | 否                        | 是                    | 否                  | 是                   |
  | 初始化列表      | 否                        | 是                    | 否                  | 是                   |



### 5. 关系运算

| 操作                 | 效果       |
| -------------------- | ---------- |
| `==`、`!=`           | 相等性判断 |
| `<`、`<=`、`>`、`>=` | 关系运算符 |

注：容器的关系运算符使用元素的关系运算符完成比较。元素至少需要定义了`==`和`<`运算符。



### 6. 元素访问

| 操作        | 效果                                                         |
| ----------- | ------------------------------------------------------------ |
| `c.back()`  | 返回`c`中尾元素的引用。若`c`为空，函数行为未定义             |
| `c.front()` | 返回`c`中首元素的引用。若`c`为空，函数行为未定义             |
| `c[n]`      | 返回`c`中下标为`n`的元素的引用。下标越界时行为未定义         |
| `c.at(n)`   | 返回下标为`n`的元素的引用。下标越界时，抛出`out_of_range`异常 |



### 7. 获取子字符串

| 操作               | 效果                                                         |
| ------------------ | ------------------------------------------------------------ |
| `s.substr(pos, n)` | 返回一个`string`，包含`s`中从`pos`开始直到`s`结束的字符的拷贝。<br />`pos`的默认值为 0，`n`的默认值为`s.size()-pos`，故有三种调用方式。<br />注：如果开始位置超过了`string`的大小，则`substr`函数抛出一个`out_of_range`异常 |



### 8. 字符串查找

字符串查找操作统一返回指定字符出现的下标，如果未找到则返回`npos`

| 操作                        | 效果                                              |
| --------------------------- | ------------------------------------------------- |
| `s.find(args)`              | 查找`s`中`args`第一次出现的位置                   |
| `s.rfind(args)`             | 查找`s`中`args`最后一次出现的位置                 |
| `s.find_first_of(args)`     | 在`s`中查找`args`中任何一个字符第一次出现的位置   |
| `s.find_last_of(args)`      | 在`s`中查找`args`中任何一个字符最后一次出现的位置 |
| `s.find_first_not_of(args)` | 在`s`中查找第一个不在`args`中的字符               |
| `s.find_last_not_of(args)`  | 在`s`中查找最后一个不在`args`中的字符             |

`args`必须是以下形式之一：

- `c, pos`：从`s`中位置`pos`开始查找字符`c`。`pos`默认为 0
- `s2, pos`：从`s`中位置`pos`开始查找字符串`s2`。`pos`默认为 0
- `cp, pos`：从`s`中位置`pos`开始查找指针`cp`指向的 C 风格字符串。`pos`默认为 0
- `cp, pos, n`：从`s`中位置`pos`开始查找指针`cp`指向的数组的前`n`个字符。`pos`和`n`无默认值



### 9. 字符串比较

| 操作              | 效果                                                         |
| ----------------- | ------------------------------------------------------------ |
| `s.compare(args)` | 将`s`与`args`指定的字符串进行比较.<br />根据`s`是等于、大于还是小于参数指定的字符串，返回 0、整数或负数 |

`args`的几种参数形式：

- `s2`：比较`s`和`s2`
- `pos1, n1, s2`：将`s`中`pos1`开始的`n1`个字符与`s2`进行比较
- `pos1, n1, s2, pos2, n2`：将`s`中`pos1`开始的`n1`个字符与`s2`中从`pos2`开始的`n2`个字符进行比较
- `cp`：比较`s`与`cp`指向的 C 风格字符串
- `pos1, n1, cp`：将`s`中从`pos1`开始的`n1`个字符与`cp`指向的 C 风格字符串进行比较
- `pos1, n1, cp, n2`：将`s`中从`pos1`开始的`n1`个字符与指针`cp`指向的地址开始的`n2`个字符进行比较



### 10. 数值转换

| 操作                                                         | 效果                                                         |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| `to_string(val)`                                             | 一组重载函数，返回数值`val`的`string`表示。<br />`val`可以是任何算数类型。对每个浮点类型和`int`或更大的整型，都有相应版本的`to_string`.<br />与往常一样，小整型会被提升 |
| `stoi(s, p, b)`<br />`stol(s, p, b)`<br />`stoul(s, p, b)`<br />`stoll(s, p, b)`<br />`stoull(s, p, b)` | 返回`s`的起始子串（表示整数内容）的数值<br />返回值类型分别是`int`、`long`、`unsigned long`、`long long`、`unsigned long long`<br />`b`表示转换所用的基数（进制），默认值是 10。<br />`p`是`size_t`指针，用来保存`s`中第一个非数值字符的下标，`p`默认为 0，即函数不保存下标 |
| `stof(s, p)`<br />`stod(s, p)`<br />`stold(s, p)`            | 返回`s`的起始子串（表示浮点数内容）的数值，<br />返回值类型分别是`float`、`double`或`long double`<br />参数`p`的作用与整数转换函数中一样。 |



### 11. 输入输出

| 操作               | 效果                                                         |
| ------------------ | ------------------------------------------------------------ |
| `os << str`        | 将`str`写入到输出流`os`中                                    |
| `is >> str`        | 从输入流`is`中将内容写入`str`中，从第一个非空白符开始到空白符结束，不包括最后遇到的空白符 |
| `getline(is, str)` | 从输入流`is`读取一行内容到`str`中，不包含换行符              |



### 12. 字符串连接

| 操作          | 效果                           |
| ------------- | ------------------------------ |
| `str1 + str2` | 返回`str1`和`str2`连接后的结果 |

:::info string 对象与字符串字面值混合相加

在一个需要`string`对象的地方如果使用字符串字面值，该字面值可以自动转换为`string`对象。故当`string`对象与字符串字面值混合相加时，需要考虑`+`操作符的结合律。由于`+`从左往右进行计算，所以不能将两个字符串字面值放在整个加法的最前面，因为没有语法允许两个字符串字面值的加法操作，例如：

```cpp
string s1 = "hello", s2 = "world";
string s3 = s1 + ", " + s2 + "!\n";			// 正确
string s4 = s1 + ", " + "world" + "!\n";	// 正确
// error-next-line
string s5 = "hello" + ", " + s2 + "!\n";	// 错误
```

:::



### 13. 与旧代码的接口

如果程序某处需要一个 C 风格字符串，但我们只有`string`对象时，不能像使用 C 风格字符串代替`string`对象（例如`string`初始化，`string`加法等）一样使用`string`对象替代 C 风格字符串。

但`string`类提供了一个操作可以获取一个`string`对象对应的 C 风格字符串：

| 操作          | 效果                                                         |
| ------------- | ------------------------------------------------------------ |
| `str.c_str()` | 返回`const char*`类型的值，该指针指向的 C 风格字符串和`str`这个`string`对象保存了相同的字符串 |

需要注意的是，由于返回的是一个`const char*`类型的指针，所以不能通过这个指针修改原本的字符串内容。

同时，虽然该函数的实现并不清楚，但当我们通过原本的`string`对象修改了字符串的内容后，所返回的这个 C 风格字符串通常将会失效。