---
title: vector
---

## 使用前

```cpp
#include <vector>
using std::vector;
```



## 一、简介

`vector`是一个容器，具体实现为可变长顺序容器。另外，`vector`是一个模板，使用前需要实例化成具体的类型：

```cpp
vector<int> ivec;
vector<vector<string>> file;
```

:::tip 老式编译器模板嵌套声明格式

当模板的实例化类型仍是模板时，外层尖括号对的右侧尖括号必须和内层尖括号对的右侧尖括号隔一个空格：

```cpp
vector<vector<string> > file;
```

:::



## 二、接口

### 1. 类型

| 类型                                              | 用处                                                         |
| ------------------------------------------------- | ------------------------------------------------------------ |
| `std::vector<T>::size_type`                       | 用于标记`vector`长度的类型。`vec.size()`返回该类型           |
| `std::vector<T>::iterator`                        | `vector`迭代器类型，`vec.begin()`、`vec.end()`返回该类型     |
| `std::vector<T>::const_iterator`                  | `vector`常量迭代器类型，`vec.cbegin()`、`vec.cend()`返回该类型 |
| `std::vector<T>::const_iterator::difference_type` | 迭代器之差类型。两迭代器相减返回该类型                       |



### 2. 定义与初始化

| 初始化方式                      | 效果                                                   |
| ------------------------------- | ------------------------------------------------------ |
| `vector<T> v1`                  | 默认初始化为空`vector<T>`                              |
| `vector<T> v2(v1)`              | 将`v1`拷贝至`v2`                                       |
| `vector<T> v2 = v1`             | 效果同上                                               |
| `vector<T> v3(n, val)`          | 用`n`个`val`组成的`vector<T>`初始化`v3`                |
| `vector<T> v4(n)`               | 用`n`个执行了**值初始化**值构成的`vector<T>`初始化`v4` |
| `vector<T> v5 {a, b, c, ...}`   | 列表初始化，`v5`的个数为初始值的个数                   |
| `vector<T> v5 = {a, b, c, ...}` | 效果同上                                               |

:::info 列表初始化形式也可使用构造函数

通常，如果我们使用花括号的初始化方式初始化一个`vector`，那么将进行列表初始化。而如果列表中的初始值不满足列表初始化的要求，则会考虑其他初始化方式，例如`v3`的直接初始化方式。如果没有任何初始化方式能够匹配给出的初始值，则会报错。

```cpp
vector<int> ivec1(3, 4);			// ivec1 包含 3 个 4
vector<int> ivec2 {3, 4};			// ivec2 包含 3、4 两个元素
vector<string> svec1 {4, "yes"};	// svec1 包含 4 个 "yes" 字符串
vector<string> svec2 = {3};			// svec2 包含 3 个空串
// error-next-line
vector<string> rvec {3, 4};		// 错误：没有与之匹配的初始化方式
```

:::



### 3. 其他操作

- `vec`：一个实例化后的`vector`对象

| 操作                                                         | 效果                                                         |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| `vec.empty()`                                                | 如果`vec`不含有任何元素，则返回`true`；否则返回`false`       |
| `vec.size()`                                                 | 返回`vec`中元素个数。`std::vector<T>::size_type`类型返回值   |
| `vec.push_back(t)`                                           | 向`vec`的尾端添加一个值为`t`的元素                           |
| `vec[n]`                                                     | 返回`vec`中第`n`个位置上元素的引用，`n`从 0 计起             |
| `vec1 = vec2`                                                | 将`vec2`拷贝至`vec1`                                         |
| `vec1 = {a, b, c, ...}`                                      | 是`vec1`的元素和列表中的元素相同                             |
| `vec1 == vec2`<br />`vec1 != vec2`                           | 相等性判断。当且仅当它们的元素数量相同且对应位置的元素值都相同 |
| `vec1 < vec2`<br />`vec1 <= vec2`<br />`vec1 > vec2`<br />`vec1 >= vec2` | 以字典序进行比较                                             |



### 4. 迭代支持

- 范围`for`语句
- 下标迭代
- 迭代器迭代



### 5. 与旧代码的接口

如果我们想使用数组初始化一个`vector`对象，我们不能直接用该数组作为初始值。

实际上，`vector`还支持以下的初始化方式：

| 初始化方式                 | 效果                                                         |
| -------------------------- | ------------------------------------------------------------ |
| `vector<T> v1(begin, end)` | 其中`begin`和`end`是指向同一个数组或容器的指针或迭代器，<br />不一定是首位指针（迭代器）和尾后指针（迭代器）。<br />其执行的操作是将`begin`指向的元素开始（包括该元素）到`end`指向的位置结束（不包括该位置的元素）这个范围内的元素依次拷贝到`v1`中 |

使用该初始化方式，只需要保证`begin`指向的元素在`end`所指的位置之前且两个指针（迭代器）都指向同一数组（容器）的有效位置即可。
