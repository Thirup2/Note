## 一、三法则

> 如果一个类需要自定义析构函数，几乎可以肯定它也需要自定义拷贝赋值运算符和拷贝构造函数。一共 3 个函数。

在“三法则”中：析构函数、拷贝构造函数、拷贝赋值运算符这三者应该看做一个整体。如果定义了其中一个，另外两个也应该进行定义而不是采用合成的函数。

如果一个类需要一个析构函数，几乎可以肯定他也需要一个拷贝构造函数和一个拷贝赋值运算符。当一个类需要一个析构函数的时候，说明它的函数体不会再是空的，也就是说该类几乎肯定管理了一些资源需要手动进行释放，而这样的资源对于合成的拷贝构造函数和拷贝赋值运算符则是忽略的，所以我们也需要定义自己的拷贝构造函数和拷贝赋值运算符来拷贝这样的资源。

另外，需要拷贝操作的类也需要赋值操作，反之亦然。拷贝赋值运算符执行的操作和拷贝构造函数几乎是相同的，只是需要返回左侧运算对象。所以如果拷贝构造函数需要自定义，那么拷贝赋值运算符应该也需要自定义。



## 二、五法则

> 如果一个类定义了移动操作，那么也需要定义拷贝操作。一共 5 个函数。

第一个原因是如果类需要自定义移动操作，说明这样的类对象肯定管理着资源，而管理着资源的类也需要定义拷贝操作和析构函数。同时，如果定义了移动操作而不定义拷贝操作，那么拷贝操作就将被隐式定义为删除的。

第二个原因是虽然如果只定义拷贝操作也能处理所有的情况，但对于管理着资源的类来说，拷贝一个资源会导致一些额外的开销，在这种拷贝并非必要的情况下，定义了移动构造函数和移动赋值运算符的类就可以避免此问题。