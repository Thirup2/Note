---
slug: /DSA_in_C/Array
---

:::info 说明

在一般的数据结构教材中，并未特别列出这一节内容，但在考研数据结构中却要求了本节内容。同时却又并未要求本节数据结构的实现，仅仅只是对各种特殊矩阵的理解和实现方法的了解。

因此，暂时无法对本节内容按照一般形式进行总结，仅仅只是将书上涉及到的内容总结下来。

等以后扩展了此部分知识之后再将其按照和其他数据结构相同的形式进行重建。

:::

## 一、定义

**数组**是由 $n(n\geqslant 1)$ 个相同类型的数据元素构成的**有限序列**，每个数据元素称为一个**数组元素**，每个元素在 $n$ 个线性关系中的序号称为该元素的**下标**，下标的取值范围称为数组的**维界**。

:::tip 数组与线性表的关系

数组是线性表的推广。一维数组可视为一个线性表；二维数组可视为其元素也是**定长**线性表的线性表，以此类推。

需要注意的是，数组和线性表的不同之处在于：数组一旦被定义，其维数和维界就不再改变。因此，除结构的初始化和销毁外，数组只会存取元素和修改元素的操作。

:::



## 二、物理结构

大多数计算机语言都提供了数组数据类型，本节中的数组的逻辑定义虽然和一些编程语言的数组类型有所区别，但基本上可直接采用数组类型进行存储，一个数组的所有元素在内存中占用一段连续的存储空间。

对于多维数组，有两种映射方法：按行优先和按列优先。在编程语言中的数组类型通常是按行优先的，即先行后列，先存储行号较小的元素，行号相等先存储列号较小的元素。

:::caution 注意

需要注意的是，不论是一维数组还是多维数组，它们在内存中的存储永远是线性的，而非逻辑定义上的矩阵。而按行优先和按列优先的排列方式决定了同一个矩阵中的元素存入内存的方式，按行优先是一行一行地将元素存入内存，而按列优先是一列一列地将元素存入内存。

如果使用下标访问元素，则访问同一个元素并不会产生下标的变化。而如果使用地址访问元素，则按行优先和按列优先的访问方式就会产生区别。

:::



## 三、特殊矩阵的压缩存储

:::tip 名词解释

- **特殊矩阵**：指具有许多相同矩阵元素或零元素，并且这些相同矩阵元素或零元素的分布有一定规律性的矩阵。常见的特殊矩阵有对称矩阵、上（下）三角矩阵、对角矩阵等
- **压缩存储**：特殊矩阵如果按照正常方式存储一般会浪费比较多的空间，而压缩存储就是尽量减少浪费空间的存储特殊矩阵的方法。通常是为多个值相同的元素只分配一个存储空间，对零元素不分配存储空间。

:::

### 1. 对称矩阵

**定义**：若对一个 $n$ 阶矩阵 $A$ 中的任意一个元素 $a_{i,j}$ 都有 $a_{i,j}=a_{j,i}\ (1\leqslant i, j\leqslant n)$ 则称其为对称矩阵。其中的元素可以划分为 3 个部分，即上三角区、主对角线和下三角区。

**分析**：对于 $n$ 阶对称矩阵，上三角区的所有元素和下三角区的对应元素相同，若仍然采用二维数组存放，则会浪费几乎一半的空间。实际上真正需要的空间只有一个三角区的空间加上主对角线的元素个数，一共是 $n(n+1)\over 2$

**压缩**：我们用一个一维数组 $B[n(n+1)/2]$ 来存放 $n$ 阶对称矩阵 $A$，然后将下三角区或上三角区加上对角线的元素存入该数组即可，通常选择存储下三角区。如果按照按行优先的方法来存储，此时 $a_{i,j}$ 与 $b_k$ 将有以下关系：$k={i(i-1)\over 2}+j-1$（数组下标从零开始）。而对于没有显式保存的上三角区的元素 $a_{i,j}$ 来说，$b_k$ 与其关系如下：$k={j(j-1)\over 2}+i-1$，即
$$
k=\begin{cases}{i(i-1)\over 2}+j-1,&i\geqslant j\ (下三角区和主对角线元素)\\
{j(j-1)\over 2}+i-1,&i<j\ (上三角区元素\ a_{ij}=a{ji})
\end{cases}
$$


### 2. 三角矩阵

**定义**：三角矩阵即某个三角区的所有元素均为同一常量。在上三角矩阵中，整个下三角区的元素为同一常量，而下三角矩阵则相反。

**分析**：与对称矩阵类似，另一个三角区虽然不是完全不用花费空间，但需要的空间仅仅为 1，所以全部需要的空间为 ${n(n+1)\over 2}+1$

**压缩**：和对称矩阵一样，我们用一个一维数组 $B[{n(n+1)\over 2}+1]$ 来存放 $n$ 阶三角矩阵 $A$，特别地，将其元素完全相同的那个三角区的值保存到一维数组最后一个元素位置。

对于下三角矩阵来说，此时 $b_k$ 和 $a_{i,j}$ 的下标对应关系如下：
$$
k=\begin{cases}
{i(i-1)\over 2}+j-1,&i\geqslant j\ (下三角区和主对角线元素)\\
{n(n+1)\over 2},&i<j\ (上三角区元素)
\end{cases}
$$
对于上三角矩阵来说，此时 $b_k$ 和 $a_{i,j}$ 的下标对应关系如下：
$$
k=\begin{cases}
{(i-1)(2n-i+2)\over 2}+(j-i),&i\leqslant j\ (上三角区和主对角线元素)\\
{n(n+1)\over 2},&i>j\ (下三角区元素)
\end{cases}
$$


### 3. 三对角矩阵

**定义**：对于 $n$ 阶矩阵 $A$ 中的任意一个元素 $a_{i,j}$，当 $|i-j|>1$ 时，有 $a_{i,j}=0(1\leqslant i,\ j\leqslant n)$，则称为**三对角矩阵**，即所有非零元素都集中在以主对角线为中心的 3 条对角线的区域，其他区域的元素都为零。三对角矩阵是对角矩阵（也称为带状矩阵）的一个特例，一般来说直接研究对角矩阵能直接解决所有包括三对角矩阵在内的所有对角矩阵，但此处仍然选择只研究三对角矩阵。

**分析**：由于三对角矩阵的对角线之外的区域都为零，所以我们也就不用为其分配空间，而一个 $n$ 阶三条对角线需要的总空间为 $3n-2$

**压缩**：我们仍然用一个一维数组 $B[3n-2]$ 来保存这个 $n$ 阶三对角矩阵 $A$。仍然按照按行优先的原则存储元素，可以得到 $b_k$ 与 $a_{i,j}$ 的下标关系如下：
$$
k=2i+j-3,\ (1\leqslant i,\ j\leqslant n,\ |i-j|\leqslant 1)
$$
而如果访问的位置在矩阵中但不在三条对角线中，则代表该位置值为 0



## 四、稀疏矩阵

**定义**：矩阵中非零元素的个数 $t$，相对于矩阵元素的个数 $s$ 来说非常少，即 $s\gg t$ 的矩阵称为**稀疏矩阵**。简单来说，就是矩阵中含有大量的零，而非零元素寥寥无几并且随机排列。

**分析**：若采用常规方法存储稀疏矩阵，毫无疑问会相当浪费存储空间，因此仅存储非零元素。但通常非零元素的分布没有规律，所以仅存储非零元素的值是不够的，还要存储它所在的位置信息。

**压缩**：因此，此时每个数据元素应该由两个数据域构成，一个数据域包含两个数据项表示该元素在矩阵中的位置信息，另一个数据域则保存该位置上的非零元素。假设整个矩阵中非零元素一共 $n$ 个且都为`int`类型，然后位置信息也用两个`int`类型变量进行存储，那么此时总共需要的空间就是 $3n$。也就是说，在这种粗糙的定义下，当 $s>3t$ 时才能称得上是 $s\gg t$，否则就不能将其当作一个稀疏矩阵来进行存储。当然，由于这个定义非常粗糙，实际数据元素的尺寸和用来保存位置信息的元素类型的尺寸都会影响到这个最终需要的空间大小，所以，最终是否将矩阵当作稀疏矩阵进行存储需要考虑实际问题和实现方法。另外，稀疏矩阵在压缩存储后就失去了随机存取的特性，需要注意。