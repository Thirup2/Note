---
title: JavaScript
---

## 一、使用 JavaScript

JavaScript 是一个脚本语言，和一般的高级语言不同，高级语言处在编程语言中的第 3 层，而脚本语言则是处在编程语言中的第 4 层。

在 HTML 中使用 JavaScript 需要注意的一点就是，浏览器会按照从上到下的顺序解析 HTML 文档，一旦解析到了 JavaScript 的部分，就会直接开始执行，而不是等除了 JavaScript 之外的 HTML 都解析完成之后才开始执行 JavaScript。

在 HTML 中使用 JavaScript 有两种方法，他们的使用方法都是在 HTML 中插入`script`元素：

### 1. 内嵌脚本

用 JavaScript 作为`script`元素的内容即内嵌脚本：

```html
<!DOCTYPE HTML>
<html>
    <head>
        <title>Example</title>
    </head>
    <body>
        <!-- highlight-start -->
        <script type="text/javascript">
            document.writeln("Hello");
        </script>
        <!-- highlight-end -->
        World!
    </body>
</html>
```

当浏览器解析到`script`元素时，就会直接执行其中的内容，`document.writeln("Hello");`的效果就是在页面中添加一个流内容，即文本“Hello”。

**渲染效果**：

![13](/imgs/Web应用开发/Web基础/13.png)



### 2. 外部脚本

在`script`内不填入具体的脚本内容，而通过添加`src`属性并绑定外部脚本文件名作为该属性值即可添加外部脚本：

<Tabs>

<TabItem value="html" label="index.html">

```html
<!DOCTYPE HTML>
<html>
<head>
    <title>Example</title>
</head>
<body>
    <script src="script.js"></script>
    World!
</body>
</html>
```

</TabItem>

<TabItem value="js" label="script.js">

```js
document.writeln("Hello");
```

</TabItem>

</Tabs>

其渲染效果和上例相同，此处不再重复展出。



## 二、语句

JavaScript 的基本单位是语句。一条语句代表着一条命令，通常以分号结尾或直接换行。如果都添加分号，那么就可以在同一行书写几条语句。

示例如下：

```js
document.writeln("This is a statement");
document.writeln("This is also a statement");
```

等价于：

```js
document.writeln("This is a statement"); document.writeln("This is also a statement")
```

等价于

```js
document.writeln("This is a statement")
document.writeln("This is also a statement")
```



## 三、函数

如果想要在某处同一编写脚本，但不希望他们在同一处被运行，可以通过编写函数的方法进行。

定义一个函数需要四个部分：`function`关键字，函数名，参数列表，函数体。

示例如下：

```js
function myFunc(name, weather) {
    document.writen("Hello " + name + ".");
    document.writen("It is " + weather + " today");
};
```

其中`function`关键字表明接下来的名字`myFunc`是一个函数。参数列表是由`()`包裹的几个由逗号`,`隔开的变量名，表示该函数接受两个参数，名字分别是`name`和`weather`。接下来的由`{}`包裹着的内容就是函数体，是调用这个函数时将会执行的内容。

需要注意的是参数列表：当参数列表为空时，`()`需要保留，里面可以没有内容；参数不需要类型，函数也不需要返回类型，因为 JavaScript 是一个弱类型的语言。

调用一个函数需要两个部分：函数名和参数列表对应的实参，例如上方函数的调用方法应该是：

```js
myFunc("Adam", "sunny");
```

**函数返回值**：

定义函数时并不需要函数的返回类型，但函数实际上可以返回一个值，和其他高级编程语言一样，通过`return`语句来返回值。

而函数调用表达式的求值结果也就是函数所返回的值。



## 四、变量和类型

在 JavaScript 中变量也是有类型的，但声明和定义变量都使用`var`关键字。

JavaScript 中也有局部变量和全局变量的区别，定义在函数中的变量称为**局部变量**，只能在该函数范围内使用；定义在所有函数之外的变量称为**全局变量**，可以在任何地方使用。

### 1. 基本类型

虽然都使用`var`进行变量的声明和定义，但它们也是有类型的，根据其初始值不同而不同。

- **字符串类型**

  `string`类型的值可以用夹在一对双引号或单引号之间的一串字符表示，如`"Hello World"`、`'this is a string'`。

  表示字符串时使用的引号要匹配。

  字符串是 JavaScript 中最强的类型，其他类型和字符串在同一个表达式时都会转换为字符串。

- **布尔类型**

  `boolean`类型有两个值：`true`、`false`。

- **数值类型**

  `number`类型可以表示整数和浮点数。



### 2. 对象类型

JavaScript 可以创建对象（面向“对象”这个概念中的“对象”），仍然通过`var`关键字创建，但初始值应该用`new Object()`。

例如：

```js
var myData = new Object();
```

这样就声明好了一个对象`myData`，但现在却还没有任何成员。

#### 添加成员

向一个对象中添加成员的操作和初始化该对象的成员的操作是一体的，当你写出一个成员的初始化语句之后，该成员就被添加进了对象，例如：

```js
myData.name = "Adam";
myData.weather = "sunny";
```

这样`myData`就包含了两个成员了，并且都被初始化了。

实际上，`new Object()`可以用一个花括号围起来的块替换，这个块相当于一个`Object()`的字面值：

```js
var myData = {
    name = "Adam",
    weather = "sunny",
};
```

#### 添加方法

另外，根据面向对象的概念，还可以向对象中添加函数作为方法（在 JavaScript 中一个对象拥有的函数称为该对象的方法）：

```js
var myData = {
    name = "Adam",
    weather = "sunny",
    printMessages: function() {
        document.writeln("Hello " + this.name + ". ");
        document.writeln("Today is " + this.weather + ".");
    }
}
```

或：

```js
myData.sayHello = function() {
    document.writeln("Hello");
}
```

首先，一个方法的声明和一个函数的声明不太一样，可以看到一个方法是首先写出函数名，然后再写`function`关键字，并且二者之间还添加了冒号。

另外，每一个方法都会默认传入一个参数叫做`this`，它其实就是方法所在的这个对象本身。

#### 访问对象

如果要访问一个对象，最令人熟悉的是其他语言中也存在的`.`，例如`myData.name`，同时在 JavaScript 中还有一种特殊的访问方法，使用`myData["name"]`的形式，`myData.name`和`myData["name"]`这两者是等价的。

之所以存在后面这种形式，是因为 JavaScript 存在一种语法，可以遍历一个对象中的成员：

```js
for (var prop in myData) {
    document.writeln("Name: " + prop + " Value: " + myData[prop]);
}
```

`var prop`会在每一次迭代中将`prop`按顺序初始化为`myData`中的成员名，是一个`string`类型。

#### 删除成员

通过`delete`关键字还可以删除一个对象中的成员：

```js
delete myData.sayHello;
```

#### 判定成员是否属于对象

通过下面的方法可以判断成员是否属于对象：

```js
var hasName = "name" in myData;
```

等号后面的表达式判断名为`"name"`的成员是否在对象`myData`中，并返回一个`boolean`值，所以`hasName`将被初始化为一个`boolean`类型。



## 五、运算符

JavaScript 定义了大量标准运算符，下面罗列了最常用的一些运算符：

| 运算符                  | 说明                           |
| ----------------------- | ------------------------------ |
| `++`、`--`              | 前置或后置自增和自减           |
| `+`、`-`、`*`、`/`、`%` | 加、减、乘、除、取余           |
| `<`、`<=`、`>`、`>=`    | 小于、小于等于、大于、大于等于 |
| `==`、`!=`              | 相等和不相等                   |
| `===`、`!==`            | 等同和不等同                   |
| `&&`、`||`              | 逻辑与、逻辑或                 |
| `=`                     | 赋值                           |
| `+`                     | 字符串连接                     |
| `?:`                    | 三元条件语句                   |

大多数符号在其他编程语言中都是有的，这里以 C++ 为标准的话，则需要特别注意`==`、`!=`和`===`、`!==`这四个运算符。

其中`==`和`!=`是基于值的比较，运算符的两个运算对象会转换为同一种类型以判断是否想等。而`===`、`!==`是更底层的比较，只有当两个运算对象类型和值都相同时才是等同的。

### 1. 对象的比较

JavaScript 如果用一个对象作为初始值赋值给一个新声明的`var`，那么这个赋值语句执行的将不是拷贝，而是引用，即二者其实是同一个对象：

```js
var myData1 = {
    name = "Adam",
    weather = "sunny",
};

var myData2 = myData1;
```

此时无论是`myData1 == myData2`还是`myData1 === myData2`都将返回`true`，如果在`myData2`上修改对应的成员值，那么`myData1`的成员值也会被修改。

另一个比较特殊的是即使定义一个新的和`myData1`完全相同的对象，二者无论是类型还是值也都是不同的：

```js
var myData3 = {
    name = "Adam",
    weather = "sunny",
};
```

此时无论是`myData1 == myData3`还是`myData1 === myData3`都将返回`false`。



### 2. 类型转换

布尔类型、数值类型在和字符串类型进行连接操作时会自动转换为字符串类型：

```js
document.writeln(10 + 11);
document.writeln("10 + 11 = " + 10 + 11);
```

其中第一条语句将会输出`21`，而第二条语句将会输出`10 + 11 = 1011`。主要原因是因为其他类型会自动转换为字符串类型，还有一个原因是`+`运算符从左往右执行，如果让后面的`+`运算符先执行，那么就可以得到一个正常输出，所以上面那条出错的语句我们可以通过添加`()`来改变运算顺序从而将其修改正确：

```js
document.writeln("10 + 11 = " + (10 + 11));
```

这样就可以得到正确的输出了。
