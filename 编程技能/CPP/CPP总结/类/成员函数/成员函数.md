# 一. 简介

成员函数**声明**在类的内部，作为类的成员而存在，而它的**定义**既可以在类内，也可以在类外。

需要注意的是，编译一个类时，首先编译成员的声明，然后才是成员函数体（函数的定义），所以成员函数体可以随意使用类中的其他成员而无须在意这些成员出现的次序。



# 二. 语法

## 1. 声明

首先，成员函数的声明只能在类内部，其格式如下：

```c++
RetType FunName(<Para-List>) <const>;
```



## 2. 类内定义

类内定义的函数直接将声明变成定义即可，只需要去掉分号，加上函数体即可，与普通的函数基本相同，其格式如下：

```c++
RetType FunName(<Para-List>) <const> {/* 函数体 */}
```



## 3. 类外定义

类外定义也就意味着必须有一个类内的声明以及一个类外的定义，二者必须匹配，也就是说，返回类型、参数列表和函数名都得与类内部的声明保持一致。如果成员被声明成常量成员函数，那么它的定义也必须在参数列表后明确指定`const`属性。

另外，定义在类外部的成员函数由于其作用域在类作用域外，所以要定义成员函数必须通过作用域运算符（`::`）来访问类内的声明，不然其效果就是声明了一个与一个成员函数同名的非成员函数，成员函数的调用需要先指定对象，而非成员函数不需要，二者是有区别的。

下面是成员函数外部定义的格式：

```c++
class ClassName {
    /* ... */
    RetType FunName(<Para-List>) <const>;
    /* ... */
};

RetType ClassName::FunName(<Para-List>) <const>
{
    /* 函数体 */
}
```

作用域运算符说明了：我们定义了一个名为`FunName`的函数，该函数被声明在类`ClassName`的作用域内。在函数体上，类外的定义和类内定义完全相同，都可以直接使用`this`指针，也就是说，可以直接使用类内的成员。

# 三. const成员函数

首先，成员函数都会默认传入一个`this`指针，在默认情况下，`this`的类型是指向类类型非常量版本的常量指针，即：`ClassName * const this`，只限制了指针本身的常量属性，也就是顶层`const`属性，但是并没有底层`const`属性，通过指针还是可以更改类对象的值。

而`const`成员函数就将`this`指针限制为了指向常量的常量指针，即：`const ClassName * const this`，既有顶层`const`，也有底层`const`。

**对于非`const`成员函数来说，只能传入一个非常量对象；对于`const`成员函数来说，非常量对象和常量对象都能传入。**

`const`成员函数的声明方法如下：

```c++
RetType FunName(<Para-List>) const;
/* 或 */
RetType FunName(<Para-List>) const {/* 函数体 */}
```

即，在函数签名之后添加一个`const`关键字，如果是声明，就是参数列表之后到分号之前；如果是定义，就是参数列表之后到函数体之前。



# 四. 内联成员函数

对于类内定义的成员函数，其默认为内联函数，不用显式地添加`inline`关键字（也可以添加）。

对于类外定义的成员函数，其默认为非内联函数，如果要定义为内联函数，需要显式地添加一个`inline`关键字。

对于构造函数来说，上述规则同样适用。



# 五. 重载成员函数

和非成员函数相同，成员函数也可以被重载，只要遵循重载函数的规则即可。

对于重载成员函数的函数匹配，其规则与一般重载函数相同。
