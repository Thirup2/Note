# 一. 运算符优先级表

下表按优先级排列，同一个表中运算符优先级相同，排在前的表中的运算符优先级高：

| 运算符 | 结合律 | 功能           | 用法              |
| ------ | ------ | -------------- | ----------------- |
| `::`   | 左     | 全局作用域     | `::name`          |
| `::`   | 左     | 类作用域       | `class::name`     |
| `::`   | 左     | 命名空间作用域 | `namespace::name` |

| 运算符 | 结合律 | 功能     | 用法              |
| ------ | ------ | -------- | ----------------- |
| `.`    | 左     | 成员选择 | `object.member`   |
| `->`   | 左     | 成员选择 | `pointer->member` |
| `[]`   | 左     | 下标     | `expr[expr]`      |
| `()`   | 左     | 函数调用 | `name(expr_list)` |
| `()`   | 左     | 类型构造 | `type(expr_list)` |

| 运算符          | 结合律 | 功能         | 用法                    |
| --------------- | ------ | ------------ | ----------------------- |
| `++`            | 右     | 后置递增运算 | `lvalue++`              |
| `--`            | 右     | 后置递减运算 | `lvalue--`              |
| `typeid`        | 右     | 类型ID       | `typeid(type)`          |
| `typeid`        | 右     | 运行时类型ID | `typeid(expr)`          |
| `explicit cast` | 右     | 类型转换     | `cast_name<type>(expr)` |

| 运算符      | 结合律 | 功能         | 用法              |
| ----------- | ------ | ------------ | ----------------- |
| `++`        | 右     | 前置递增运算 | `++lvalue`        |
| `--`        | 右     | 前置递减运算 | `--lvalue`        |
| `~`         | 右     | 位求反       | `~expr`           |
| `!`         | 右     | 逻辑非       | `!expr`           |
| `-`         | 右     | 一元负号     | `-expr`           |
| `+`         | 右     | 一元正号     | `+expr`           |
| `*`         | 右     | 解引用       | `*expr`           |
| `&`         | 右     | 取地址       | `&lvalue`         |
| `()`        | 右     | 类型转换     | `(type)expr`      |
| `sizeof`    | 右     | 对象的大小   | `sizeof expr`     |
| `sizeof`    | 右     | 类型的大小   | `sizeof(type)`    |
| `sizeof...` | 右     | 参数包的大小 | `sizeof...(name)` |
| `new`       | 右     | 创建对象     | `new type`        |
| `new[]`     | 右     | 创建数组     | `new type[size]`  |
| `delete`    | 右     | 释放对象     | `delete expr`     |
| `delete[]`  | 右     | 释放数组     | `delete[] expr`   |
| `noexcept`  | 右     | 能否抛出异常 | `noexcept(expr)`  |

| 运算符 | 结合律 | 功能               | 用法                  |
| ------ | ------ | ------------------ | --------------------- |
| `->*`  | 左     | 指向成员选择的指针 | `ptr->*ptr_to_member` |
| `.*`   | 左     | 指向成员选择的指针 | `obj.*ptr_to_member`  |

| 运算符 | 结合律 | 功能       | 用法          |
| ------ | ------ | ---------- | ------------- |
| `*`    | 左     | 乘法       | `expr * expr` |
| `/`    | 左     | 除法       | `expr / expr` |
| `&`    | 左     | 取模(取余) | `expr % expr` |

| 运算符 | 结合律 | 功能 | 用法          |
| ------ | ------ | ---- | ------------- |
| `+`    | 左     | 加法 | `expr + expr` |
| `-`    | 左     | 减法 | `expr - expr` |

| 运算符 | 结合律 | 功能     | 用法           |
| ------ | ------ | -------- | -------------- |
| `<<`   | 左     | 向左移位 | `expr << expr` |
| `>>`   | 左     | 向右移位 | `expr >> expr` |

| 运算符 | 结合律 | 功能     | 用法           |
| ------ | ------ | -------- | -------------- |
| `<`    | 左     | 小于     | `expr < expr`  |
| `<=`   | 左     | 小于等于 | `expr <= expr` |
| `>`    | 左     | 大于     | `expr > expr`  |
| `>=`   | 左     | 大于等于 | `expr >= expr` |

| 运算符 | 结合律 | 功能   | 用法           |
| ------ | ------ | ------ | -------------- |
| `==`   | 左     | 相等   | `expr == expr` |
| `!=`   | 左     | 不相等 | `expr != expr` |

| 运算符 | 结合律 | 功能 | 用法          |
| ------ | ------ | ---- | ------------- |
| `&`    | 左     | 位与 | `expr & expr` |

| 运算符 | 结合律 | 功能   | 用法          |
| ------ | ------ | ------ | ------------- |
| `^`    | 左     | 位异或 | `expr ^ expr` |

| 运算符              | 结合律 | 功能 | 用法                          |
| ------------------- | ------ | ---- | ----------------------------- |
| <code>&#124;</code> | 左     | 位或 | <code>expr &#124; expr</code> |

| 运算符 | 结合律 | 功能   | 用法           |
| ------ | ------ | ------ | -------------- |
| `&&`   | 左     | 逻辑与 | `expr && expr` |

| 运算符                    | 结合律 | 功能   | 用法                                |
| ------------------------- | ------ | ------ | ----------------------------------- |
| <code>&#124;&#124;</code> | 左     | 逻辑或 | <code>expr &#124;&#124; expr</code> |

| 运算符 | 结合律 | 功能 | 用法                 |
| ------ | ------ | ---- | -------------------- |
| `? :`  | 右     | 条件 | `expr ? expr : expr` |

| 运算符                                                       | 结合律 | 功能     | 用法               |
| ------------------------------------------------------------ | ------ | -------- | ------------------ |
| `=`                                                          | 右     | 赋值     | `lvalue = expr`    |
| `*=`、`/=`、`%=`<br />`+=`、`-=`<br />`<<=`、`>>=`<br />`&=`、<code>&#124;=</code>、`^=` | 右     | 复合赋值 | `lvalue += expr`等 |

| 运算符  | 结合律 | 功能     | 用法         |
| ------- | ------ | -------- | ------------ |
| `throw` | 右     | 抛出异常 | `throw expr` |

| 运算符 | 结合律 | 功能 | 用法         |
| ------ | ------ | ---- | ------------ |
| `,`    | 左     | 逗号 | `expr, expr` |



# 二. 控制运算对象求值顺序的运算符

## 1. 逻辑与(`&&`)运算符

左侧运算对象先求值，只有当左侧运算对象为真时才继续求右侧运算对象的值。



## 2. 逻辑或(`||`)运算符

左侧运算对象先求值，只有当左侧运算对象为假时才继续求右侧运算对象的值。



## 3. 条件(`?:`)运算符

最左侧运算对象先求值，当该值为真时，再对第二个运算对象求值，否则对第三个运算对象求值，剩余的一个运算对象不求值



## 4. 逗号(`,`)运算符

首先对左侧运算对象求值，然后丢弃该求值结果



# 三. 需要注意的运算符

## 1. 除法(`/`)、取余(`%`)运算符

**除法**(`/`)**运算符**：

- 对于整数之间的除法，将只保留整数部分
- 对于含浮点数的除法，结果为浮点数
- 对于含负数的除法，与正常数学运算结果相同

**取余**(`%`)**运算符**：

- 两个运算对象都必须为整型
- 当运算对象含一个负数时：`m % (-n) = m % n`，`(-m) % n = -(m % n)`



## 2. 递增(`++`)、递减(`--`)运算符

**前置版本**：

- 首先将运算对象加1（或减1）
- 然后将改变后的对象作为求值结果，其是一个左值

**后置版本**：

- 将运算对象加1（或减1）
- 然后返回运算对象改变之前的值的副本作为求值结果，其是一个右值



## 3. 条件(`?:`)运算符

- 当条件运算符的两个表达式都是左值或者能转换成同一种左值类型时，运算的结果是左值，否则运算的结果是右值



## 4. 位运算符

- 只作用于整型
- 其作用是返回两个运算对象每个位进行位运算之后的结果值组成的新值

**位运算**：

- 位与：当两个位都是1时为1，否则为0
- 位或：当两个位都是0时为0，否则为1
- 位异或：当两个维护不相同时为1，否则为0
- 位反：与原值所有位的值相反

**位移**：

- 左移：在右侧插入值为0的二进制位
- 右移
  - 当运算对象为无符号类型时，在左侧插入值为0的二进制串
  - 当运算对象为带符号类型时，在左侧插入符号位的副本值或值为0的二进制位，具体情况视环境而定
- 位移的右侧运算对象必须严格小于结果的位数且不能为负



## 5. `sizeof`运算符

- 返回值为`size_t`类型的常量表达式
- `sizeof(type)`：返回某种类型的大小
- `sizeof expr`：返回一个表达式所占的字节数，但并不实际计算其运算对象的值
- 对`char`或类型为`char`的表达式执行`sizeof`运算，结果得1
- 对引用类型执行`sizeof`运算得到被引用对象所占空间的大小
- 对指针执行`sizeof`运算得到指针本身所占空间的大小
- 对解引用指针执行`sizeof`运算得到指针指向的对象所占空间的大小，指针不需有效
- 对数组执行`sizeof`运算得到整个数组所占空间的大小，`sizeof`运算不会把数组转换成指针来处理
- 对`string`对象或`vector`对象执行`sizeof`运算只返回该类型固定部分的大小，不会计算对象中的元素占用了多少空间
