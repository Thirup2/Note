# 一. 操作系统的目标

操作系统的主要目标是：方便性、有效性、可扩充性和开放性。

前两个目标是设计 OS 时最重要的两个目标。在过去很长的一段时间内，由于计算机系统非常昂贵，有效性显得特别重要。而随着近十多年来，随着硬件越来越便宜，似乎更加重视如何提高用户使用计算机的方便性。

## 1. 方便性

一个未配置 OS 的计算机系统是极难使用的。用户如果想直接在计算机硬件上运行自己所编写的程序，就必须用机器语言书写程序。但如果在计算机硬件上配置了 OS，系统便可以使用编译命令将用户采用高级语言书写的程序翻译成机器代码，或者直接通过 OS 所提供的各种命令操纵计算机系统，极大地方便了用户，使计算机变得易学易用。



## 2. 有效性

有效性包含两层含义：

1. 第一层含义是提高系统资源的利用率。在早期未配置 OS 的计算机系统中，处理机、I/O 设备都经常处于空闲状态，各种资源无法得到充分利用。
2. 第二层含义是提高系统的吞吐量。OS 可以通过合理地组织计算机的工作流程，加速程序的运行，缩短程序的运行周期，从而提高了系统的吞吐量。



## 3. 可扩充性

为适应计算机硬件、体系结构以及计算机应用发展的要求，OS 必须具有很好的可扩充性。

可扩充性的好坏与 OS 的结构有着十分紧密的联系，由此推动了 OS 结构的不断发展：从早期的无结构发展成模块化结构，进而又发展成层次化结构，近年来 OS 已广泛采用了微内核结构。微内核结构能方便地增添新的功能和模块，以及对原有的功能和模块进行修改，具有良好的可扩充性。



## 4. 开放性

所谓开放性就是能够下能够兼容不同的硬件，上能够兼容不同的软件，能够做到不同机器之间的互联。

做到这点首先需要操作系统按照标准进行开发，另外硬件和软件也都遵循某种标准。



# 二. 操作系统的作用

## 1. OS 作为用户与计算机硬件系统之间的接口

在没有配置 OS 时，用户只能通过机器指令来操控计算机硬件系统。而配置了 OS 之后，作为硬件系统之上的第一层软件，它首先能够统筹管理所有的硬件，同时它能够为用户提供接口来方便地操纵硬件，这些接口主要有下面几种：

- 命令操作系统：通过在命令行输入命令来操纵操作系统执行任务，间接地控制硬件
- 图标-窗口：对于具有图形用户接口的操作系统来说，用户可以可视化地通过图标以及窗口来间接地向操作系统发出命令
- 系统调用 API ：操作系统建立在硬件之上，同时将一组对硬件的操作封装成一个 API，而操作系统通常会提供一套 API，应用程序可以使用这些 API 来编写应用程序，用户可以通过应用程序来操纵硬件

![未命名文件](https://user-images.githubusercontent.com/91216205/223376988-cde79fb2-6a7a-4c05-938a-89b6d7ca14dd.jpg)



## 2. OS 作为计算机系统资源的管理者

在一个计算机系统中，通常都含有多种硬件和软件资源。归纳起来可以将这些资源分为四类：处理机、存储器、I/O 设备以及文件（数据和程序）。同时，OS 的主要功能也正是对这四类资源进行有效的管理。

- 处理机管理是用于分配和控制处理机
- 存储器管理主要负责内存的分配与回收
- I/O 设备管理是负责 I/O 设备的分配（回收）与操纵
- 文件管理是用于实现对文件的存取、共享和保护

另外，当一台计算机系统同时供多个用户使用时，诸多用户对系统中共享资源的需求（包括数量和时间）有可能发生冲突。为此，操作系统必须对使用资源的请求进行授权，以协调诸用户对共享资源的使用。



## 3. OS 实现了对计算机资源的抽象

对于一台完全无软件的计算机系统（即裸机），由于它向用户提供的仅是硬件接口（物理接口），因此，用户必须对物理接口的实现细节有充分的了解才能使用计算机，这就导致该物理机器难于广泛使用，如下图所示：

![未命名文件 (1)](https://user-images.githubusercontent.com/91216205/223379368-6337ef58-3229-421e-ba70-4b9708bd278e.jpg)

而为了方便用户使用 I/O 设备，人们在裸机上覆盖上一层 I/O 设备管理软件，并向上提供了一组数据结构和一些 API，每个 API 由一组可直接操控 I/O 设备的机器指令组成，通过 API 我们就能更方便地操控这些 I/O 设备，如直接使用`read`和`write`命令等。而 I/O 软件也叫做硬件驱动程序。

而对于多个 I/O 设备，为了让它们协同工作，也就是方便用户使用文件系统，又可在第一层软件（I/O 管理软件）上再覆盖一层用于文件管理的软件，由它来实现对文件操作的细节，并向上层提供一组实现对文件进行存储操作的数据结构及命令。它是对 I/O 软件提供的 API 的更上层封装。而这一层实际上就是操作系统内核的文件管理模块。

而在更上一层，将操作系统内核的所有模块封装起来，同时再次向上提供一层接口，这一层接口就是我们上一节所讨论的三种接口。到此，用户在操作系统层面就能非常简单地使用到整个电脑的所有硬件了。

总体的结构如下图所示：

![未命名文件 (2)](https://user-images.githubusercontent.com/91216205/223387698-f7b70548-e167-4f95-9e4b-eb07410f0633.jpg)

如上图所示，操作系统经过层层封装，实现了对计算机资源的抽象。主要有三层封装：驱动层、内核层、用户层。其中驱动层对硬件提供最直接的操作，再上面两层都是间接进行操作的。另外，驱动层在图中虽然位于最底层抽象层，但是实际上它必须得满足操作系统的一些标准。而且我们可以看到驱动层既是硬件提供的，也是操作系统的一个组成部分，实际上这大大降低了操作系统的工作量，操作系统不用花费精力去为每一个硬件都进行手动抽象，而将这个任务交给硬件生产商，硬件生产商在制造好硬件的同时，还必须提供一个驱动程序，这个驱动程序必须按照操作系统提供的标准进行开发，很显然，硬件厂商需要对不同的操作系统提供不同的驱动程序。



# 三. 推动操作系统发展的主要动力

## 1. 不断提高计算机资源利用率

很显然，计算机资源利用率如果不充分，那么也就是说我们购买硬件所花费的费用就被浪费了一部分。



## 2. 方便用户

当资源利用率不高的问题得到基本解决后，用户在上机、调试程序时的不方便性便成为主要矛盾。这又成为继续推动 OS 发展的主要因素。



## 3. 器件的不断更新换代

对于同一种硬件，操作系统需要优化操作逻辑以适应更新的硬件，以芯片为例，它从 8 位逐步发展到现在的 64 位，操作系统需要对资源管理方案进行优化。

而对于不同硬件，操作系统需要能够适配多种多样的硬件。



## 4. 计算机体系结构的不断发展

计算机体系结构的发展，也不断推动着 OS 的发展，并产生新的 OS 类型。例如当计算机由单处理机系统发展为多处理机系统时，相应地，OS 也就由单处理机 OS 发展为多处理机 OS。



## 5. 不断提出新的应用需求

操作系统能如此迅速发展的另一个重要原因是，人们不断提出新的应用需求。例如，为了提高产品的质量和数量，需要将计算机应用于工业控制中，此处在计算机上就需要配置能进行实时控制的 OS，由此产生了实时 OS。