# 一. 加法

加法对于我们来说是个很简单的操作，但是对于计算机而言，两个相同类型的整数进行加法时，很有可能会导致一个错误：**溢出**。即两个整数的和超过了相同位数能够表示的最大数值。

我们不讨论计算机硬件如何执行加法，只讨论在计算机中，两个整数执行加法得到的结果。

## 1. 无符号整数

对于一个 $w$ 位的无符号整数，它的数值范围为 $0\sim 2^w-1$ ，加法运算的两个操作数以及加法运算得到的结果都会在这个范围内。很显然，当两个操作数的和超过这个最大值后，就会产生溢出。当只溢出 1 时，如果不限制其位数，则其位向量为最左侧一个 1，后面连着刚好 $w$ 位的 0，而结果只能是 $w$ 位，此时就会进行截断，最后的位向量将全是 0。由此可见，无符号整数的溢出其实就是实际值对最大值取模。

其定义如下：

首先我们定义一个 $w$ 位的无符号整数的加法运算符：$+_w^u$ ，假设该运算符的两个操作数为 $x,\ y\ (0\leqslant (x,\ y)<2^w)$ ，我们可以将 $+_w^u$ 描述为：
$$
x\ +_w^u\ y=\begin{cases}x+y,&x+y<2^w&正常\\
x+y-2^w,&2^w\leqslant x+y<2^{w+1}&溢出\end{cases}
$$
对于运算是否产生溢出的检测也简单，只要参与运算的两个操作数都在有效范围内，那么只要最终的结果值（不是实际值）小于 $x$ 或 $y$ 中的任意一个数，就说明产生了溢出。

## 2. 有符号整数

对于一个 $w$ 位的有符号整数，它的数值范围为 $-2^{w-1}\sim 2^{w-1}-1$ ，加法运算的两个操作数以及加法运算得到的结果值都会在这个范围内。与无符号整数加法相同，当两个操作数的和超过这个最大值后会产生溢出。只溢出 1 时理论数值为 $2^{w-1}$ ，其位向量构成为最高位为 1，后续 $w-1$ 位都为 0，其总位数还是等于 $w$ ，该位解释为补码后值为 $-2^{w-1}$ ，这与无符号整数类似，溢出后就从数值范围的头开始。

另外，当位向量构成全是 1 时，解释为补码时其值为 $-1$，在此基础上再加一位该位组成就成了最高位为 1，后续 $w$ 位都为 0，将最高位截断，就成了全为 0 的位组成，其值为 0 ，刚好是 $-1+1$ 的结果值。

其具体的定义如下：

首先定义有对于 $w$ 位的有符号整数的运算符为 $+_w^t$ ，假设该运算符的两个操作数为 $x,\ y\ (-2^{w-1}\leqslant (x,\ y)<2^{w-1}-1)$ ，我们可以将 $+_w^t$ 描述为：
$$
x\ +_w^t\ y=\begin{cases}x+y-2^w,&2^{w-1}\leqslant x+y&正溢出\\
x+y,&-2^{w-1}\leqslant x+y<2^{w-1}&正常\\
x+y+2^w,&x+y<-2^{w-1}&负溢出\end{cases}
$$
对于有符号数加法是否溢出的检测，其方法如下：

对满足 $TMin_w\leqslant \ (x,\ y)<TMax_w$ 的 $x$ 和 $y$ ，令 $s=x\ +_w^t\ y$ 。当且仅当 $x>0,\ y>0$，但 $s\leqslant 0$ 时，计算 $s$ 发生了正溢出。当且仅当 $x<0,\ y<0$，但 $s\geqslant 0$ 时，计算 $s$ 发生了负溢出。



# 二. 求负

之所以这里用求负来表示而不用减法来表示是因为单目运算符`-`对表达式也有影响，而不像`+`那样没什么影响。另外，减法可以用一个数与求负后的数进行加法来计算。