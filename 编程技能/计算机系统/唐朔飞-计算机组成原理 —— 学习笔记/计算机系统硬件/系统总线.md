# 一. 基本概念

计算机系统的五大部件之间的互连方式有两种：一种是各部件之间使用单独的连线，称为**分散连接**；另一种是将各部件连到一组公共信息传输线上，称为**总线连接**。

分散连接的弊端明显：内部连线十分复杂、I/O 设备增加或减撤操作复杂、灵活性极低。

由此出现了总线连接方式。

**总线**是连接多个部件的信息传输线，是各部件共享的传输介质。当多个部件与总线相连时，如果出现两个或两个以上部件同时向总线发送信息，势必导致信号冲突，传输无效。因此，在某一时刻，只允许有一个部件向总线发送信息，而多个部件可以同时从总线上接受相同的信息。

总线实际上是由许多传输线或通路组成，每条线可一位一位地传输二进制代码，一串二进制代码可在一段时间内逐一传输完成。若干条传输线可以同时传输若干位二进制代码，例如，16 条传输线组成的总线可同时传输 16 位二进制代码。

常见的总线结构有下面几种：

**单总线结构**：

![临时](https://user-images.githubusercontent.com/91216205/226556114-6302f264-8076-4557-bb6d-415009de5da0.jpg)

该结构主要的特点是：当 I/O 设备与主存交换信息时，原则上不影响 CPU 的工作，CPU 仍可继续处理不访问主存或 I/O 设备的操作，这就使 CPU 工作效率有所提高。但是因为只有一组总线，当某一时刻各部件都要占用总线时，就会发生冲突。为此，必须设置总线判优逻辑，让各部件按优先级高低来占用总线，这也会影响整机的工作速度。PDP-11 和国产 DJS183 机均采用这种结构。

**以 CPU 为中心的双总线结构**：

![临时 (1)](https://user-images.githubusercontent.com/91216205/226557850-d778d9c9-5f05-477d-98b5-00434e9b10a3.jpg)

该结构的主要特点是：在 I/O 设备与主存交换信息时仍然要占用 CPU，因此还会影响 CPU 的工作效率。

**以存储器为中心的双总线结构**：

![临时 (2)](https://user-images.githubusercontent.com/91216205/226558760-94aba1a3-a508-4c3e-9a21-31a386c4db36.jpg)

它是在单总线基础上又开辟出的一条 CPU 与主存之间的总线，称为存储总线。这组总线速度高，只供主存与 CPU 之间传输信息。这样即提高了传输效率，又减轻了系统总线的负担，还保留了 I/O 设备与存储器交换信息时不经过 CPU 的特点。国产 DJS184 机采用这种结构。



# 二. 总线的分类

总线可以按传输方式分类：并行传输总线和串行传输总线，在并行传输总线中，又可按传输数据宽度分为 8 位、16 位、32 位、64 位等传输总线。

若按总线的使用范围划分：计算机（包括外设）总线、测控总线、网络通信总线等。

另外，可按连接部件部分分类：片内总线、系统总线、通信总线

## 1. 片内总线

**片内总线**是指芯片内部的总线，如在 CPU 芯片内部，寄存器与寄存器之间、寄存器与算逻单元 ALU 之间都由片内总线连接



## 2. 系统总线

**系统总线**：是指 CPU、主存、I/O 设备（通过 I/O 接口）各大部件之间的信息传输线。由于这些部件通常都安放在主板或各个插件板（插卡）上，故又称**板级总线**（在一块电路板上各芯片间的连线）或**板间总线**。

系统总线按照其传输信息的不同，又可分为三类：数据总线、地址总线和控制总线

1. **数据总线**：

   用来传输各功能部件之间的数据信息；

   它是双向传输总线；

   其位数与机器字长、存储字长有关，一般为 8 位、16 位或 32 位。数据总线的位数称为数据总线宽度，它是衡量系统性能的一个重要参数。如果数据总线的宽度为 8 位，指令字长为 16 位，那么，CPU 在取指阶段必须两次访问主存。

2. **地址总线**：

   用来指出数据总线上的源数据或目的数据在主存单元的地址或 I/O 设备的地址；

   由 CPU 输出，单向传输；

   其位数与存储单元的个数有关，如地址线为 20 根，则对应的存储单元个数为 $2^{20}$

3. **控制总线**：

   控制各部件能在不同的时刻占有总线使用权，用来发出各种控制信号；

   通常对任一单一控制线而言，它的传输是单向的；而对控制总线总体来说，可认为是双向的；

   常见的控制信号如下：

   - 时钟：用来同步各种操作
   - 复位：初始化所有部件
   - 总线请求：表示某部件需获得总线使用权
   - 总线允许：表示需要获得总线使用权的部件已获得了控制权
   - 中断请求：表示某部件提出中断请求
   - 中断响应：表示中断请求已被接收
   - 存储器写：将数据总线上的数据写至存储器的指定地址单元内
   - 存储器读：将指定存储单元中的数据读到数据总线上
   - I/O 读：从指定的 I/O 端口将数据读到数据总线上
   - I/O 写：将数据总线上的数据输出到指定的 I/O 端口内
   - 传输响应：表示数据已被接收，或已将数据送至数据总线上



## 3. 通信总线

这类总线用于计算机系统之间或计算机系统与其他系统（如控制仪表、移动通信等）之间的通信。

通信总线按传输方式可分为两种：**串行通信**和**并行通信**。



# 三. 总线特性

