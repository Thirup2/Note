# 一. 刷新
`fflush`它迫使一个输出流的缓冲区内的数据进行物理写入，不管它是不是已经写满。它的原型如下：
```c
int fflush(FILE *stream);
```
当需要立即把输出缓冲区的数据进行物理写入时，应该使用这个函数。

# 二. 定位
C同时支持随机访问I/O，也就是以任意顺序访问文件的不同位置。随机访问是通过在读取或写入先前定位到文件中需要的位置来实现的。有两个函数用于执行这项操作，它们的原型如下：
```c
long ftell(FILE *stream);
int fseek(FILE *stream, long offset, int from);
```
- `ftell`返回流的当前位置，也就是说，下一个读取或写入将要开始的位置距离文件起始位置的偏移量。这个函数允许保存一个文件的当前位置，这样可能在将来会返回到这个位置。在二进制流中，这个值就是当前位置距离文件起始位置的字节数。在文本流中，这个值表示一个位置，但它不一定准确地表示当前位置和文件起始位置之间的字符数，因为有些系统将对行末字符进行翻译转换。但是，`ftell`函数返回的值总是可以用于`fseek`函数，作为一个距离文件起始位置的偏移量。
- `fseek`函数允许在一个流中进行定位。这个操作将改变下一个读取或写入操作的位置。它的第一个参数是需要改变的流。第二个参数和第三个参数表示文件中需要定位的位置。`from`可以有3个值，分别是3个常量，用于表示流的位置：`SEEK_SET`表示流的起始位置；`SEEK_CUR`表示流的当前位置；`SEEK_END`表示流的尾部位置。`offset`表示距离`from`的偏移量，可正可负

**注意**
1. 试图定位到一个文件的起始位置之前是一个错误。
2. 定位到文件尾之后并进行写入将扩展这个文件。
3. 定位到文件尾之后并进行读取将导致返回一条“到达文件尾”的信息
4. 在二进制流中，从`SEEK_END`进行定位可能不被支持，所以应该避免
5. 在文本流中，如果`from`是`SEEK_CUR`或`SEEK_END`，`offset`必须是零；如果`from`是`SEEK_SET`，`offset`必须是一个从同一个流中以前调用`ftell`时所返回的值

## 1. `fseek`的副作用
1. 行末指示字符被清除
2. 如果在`fseek`之前使用`ungetc`把一个字符返回到流中，那么这个被退回的字符会被丢弃，因为在定位操作以后，它不再是“下一个字符”。
3. 定位允许从写入模式切换到读取模式，或者回到打开的流以便更新

## 2. 其他定位函数
```c
void rewind(FILE *stream);
int fgetpos(FILE *stream, fpos_t *position);
int fsetpos(FILE *stream, fpos_t const *position);
```
- `rewind`函数将读/写指针设置回指定流的起始位置，同时清除流的错误提示标志。
- `fgetpos`函数将流的当前位置存储在`position`中
- `fsetpos`函数将流的位置设置为`position`指定的位置