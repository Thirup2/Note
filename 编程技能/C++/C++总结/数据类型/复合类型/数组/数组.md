# 一. 简介

数组是一种复合类型。与`vector`类似，但与`vector`不同的是数组的大小需要在创建时指定，且无法改变。所以用于指定数组大小的表达式必须是一个常量表达式。



# 二. 相关准备

下列的一些头文件在编写程序时如果需要可以添加：

```c++
#include <cstddef>		// 包含size_t、ptrdiff_t类型
#include <iterator>		// 包含begin、end函数
using std::begin;		// begin函数
using std::end;			// end函数
#include <cstring>		// C风格字符串处理函数
```



# 三. 定义和初始化

下表列出了数组的定义及初始化的方式：

- `Type`：某种数据类型
- `arr`：数组对象
- `size`：常量表达式

| 方式                             | 效果                                                         |
| -------------------------------- | ------------------------------------------------------------ |
| `Type arr[size];`                | 声明了一个`Type`类型的数组，其元素值执行默认初始化。         |
| `Type arr[size] = {T1, T2, ...}` | 声明并通过列表初始化了一个`Type`类型数组，列表提供的值个数不得超过`size`，若未达到，则后续元素执行默认初始化 |
| `Type arr[] = {T1, T2, ...}`     | 声明并通过列表初始化了一个`Type`类型数组，数组大小为提供的元素个数 |
| `char str[] = "String"`          | 声明并初始化了一个字符类型数组，其大小为`7`，元素还包括字面值末尾的`'\0'` |



# 四. 操作

对于数组来说，其不允许拷贝和赋值操作，即不能将一个数组直接赋值给另一个数组，只能逐个访问数组元素来进行。

数组能够进行的操作如下：

## 1. 访问数组元素

数组元素也可以通过**下标**、**范围for**以及**指针**（或迭代器）来访问。

### 1）下标

**注意**：

1. 下标不能越界
2. 下标类型为`size_t`类型

### 2）范围for

```c++
int arr[10];
for (auto &i : arr) {
    i = 1;
}
```

**注意**：

1. 不需要改变数组元素值时不要使用引用
2. 可以使用`auto`来判断循环控制变量的类型

### 3）指针

**注意**：数组名是一个指针，指向数组第一个元素

#### 获取迭代器指针

```c++
int ia[10];
int *beg = ia;		// 根据数组获得头指针
int *end = &ia[10];	// 获取数组的尾后指针

int *beg = begin(ia);	// 通过begin函数获取数组头指针
int *end = end(ia);		// 通过end函数获取数组尾后指针
```

#### 使用指针遍历

```c++
int ia[10];
for (auto beg = begin(ia), end = end(ia); beg != end; beg++) {
    *beg = 1;
}
```

#### 指针运算

对于指向数组元素的指针而言，包括以下运算：

| 操作                               | 效果                                                         |
| ---------------------------------- | ------------------------------------------------------------ |
| `*ptr`                             | 返回`ptr`所指元素的引用                                      |
| `ptr->mem`                         | 解引用`ptr`并获取该元素的名为`mem`的成员，等价于`(*ptr).mem` |
| `++ptr`                            | 令`ptr`指向数组中的下一个元素                                |
| `--ptr`                            | 令`ptr`指向数组中的上一个元素                                |
| `ptr1 == ptr2`<br />`ptr1 != ptr2` | 判断两个指针是否相等（不相等），当两个指针指向同一个位置时相等，否则不相等 |
| `ptr + n`                          | 返回一个指针，其指向`ptr`后第`n`个元素                       |
| `ptr - n`                          | 返回一个指针，其指向`ptr`前第`n`个元素                       |
| `ptr += n`                         | 将`ptr`向后移动`n`个元素                                     |
| `ptr -= n`                         | 将`ptr`向前移动`n`个元素                                     |
| `ptr1 - ptr2`                      | 返回`ptrdiff_t`类型，当两个指针指向同一个数组时，返回二者所指元素之间所隔的距离 |
| `>`<br />`>=`<br />`<`<br />`<=`   | 对于指向同一个数组的两个指针而言，指向的元素在前的更小       |



## 2. C风格字符串操作

- C风格字符串的操作由头文件`cstring`提供，其主要操作如下：

| 函数             | 效果                                                         |
| ---------------- | ------------------------------------------------------------ |
| `strlen(p)`      | 返回`p`的长度，空字符不计算在内                              |
| `strcmp(p1, p2)` | 比较`p1`和`p2`的相等性。如果`p1 == p2`，返回0；<br />如果`p1 > p2`，返回一个正值；<br />如果`p1 < p2`，返回一个负值 |
| `strcat(p1, p2)` | 将`p2`附加到`p1`之后，返回`p1`(字符串`p1`数组的大小必须能容纳两个字符串的长度及一个空字符) |
| `strcpy(p1, p2)` | 将`p2`拷贝给`p1`，返回`p1`(字符串`p1`数组的大小不得小于`p2`数组) |

- 也可以通过`string`对象的成员函数`c_str()`将`string`对象转换成一个指向字符的指针：

```c++
string s("Hello World");
const char *str = s.c_src();
```

**注意**：当原`string`对象内容改变之后，`s.c_src()`返回的数组可能会失效，如果想一直使用其返回的数组，最好将该数组重新拷贝一份。
