# 一. 简介

C++有几种表示字符串的方式，一是字符数组，二是`string`类型的字符串。

字符数组其长度一定，一般不能再改变，且与字符串字面值相同，都含有末尾的`'\0'`字符；

`string`类型字符串表示可变长的字符序列，不包含末尾的`'\0'`字符

# 二. 使用准备

```c++
#include <string>			// string类头文件
using std::string;			// string类型声明符
using std::getline;			// getline函数

#include <cctype>			// 字符处理函数头文件
```



# 三. 定义和初始化

其方式如下表：

| 方式                  | 含义                                          |
| --------------------- | --------------------------------------------- |
| `string s1`           | 默认初始化，`s1`是一个空串                    |
| `string s2(s1)`       | 将`s1`拷贝到`s2`                              |
| `string s2 = s1`      | 将`s1`拷贝到`s2`                              |
| `string s3("value")`  | 用字面值`"value"`初始化`s3`，不包含末尾空字符 |
| `string s3 = "value"` | 用字面值`"value"`初始化`s3`，不包含末尾空字符 |
| `string s4(n, 'c')`   | 将`s4`初始化为由连续`n`个字符`c`组成的串      |

- 其中2,4,6这三种方式属于**直接初始化**；3,5两种方式属于**拷贝初始化**。从效率上来说，直接初始化效率更高。
- 可以将直接初始化的方式用拷贝初始化表示：`string s = string("value");`，相当于创建了一个临时对象用于拷贝。
- 上述中任何可以出现字符串字面值的地方都可以用一个以空字符结束的字符数组来替代



# 四. 操作

`string`类型支持的操作如下：

- `os`：输出流
- `is`：输入流
- `s`：`string`对象

| 操作                             | 效果                                                         |
| -------------------------------- | ------------------------------------------------------------ |
| `os << s`                        | 将`s`写到输出流`os`中，返回`os`                              |
| `is >> s`                        | 从`is`中读取字符串赋给`s`，字符串以空白分隔，返回`is`（从第一个非空白字符开始到空白为止，不包含空白） |
| `getline(is, s)`                 | 从`is`中读取一行赋给`s`，返回`is`（不包括换行符，若第一个字符就是换行符，则保存的是空串） |
| `s.empty()`                      | 返回`bool`类型，若`s`为空返回`true`，否则返回`false`         |
| `s.size()`                       | 返回`string::size_type`类型，返回`s`中字符的个数             |
| `s.begin()`                      | 返回`string::iterator`或`string::const_iterator`类型，返回指向`s`第一个字符的迭代器 |
| `s.end()`                        | 返回`string::iterator`或`string::const_iterator`类型，返回`s`的尾后迭代器 |
| `s.c_str()`                      | 返回`const char *`类型，将`s`转换成一个C风格字符串并返回指向该字符串的指针 |
| `s[n]`                           | 返回`s`中第`n`个字符的引用，位置`n`从0计起                   |
| `s1 + s2`                        | 返回`s1`和`s2`连接后的结果。也可以是字面值或以空字符结尾的字符数组与`string`对象相加，字面值或数组会被转换为`string`对象，但不能两个字面值相加。<br />**注**：`+`运算符满足左结合律 |
| `s1 = s2`                        | 用`s2`为`s1`赋值                                             |
| `s1 == s2`<br />`s1 != s2`       | 返回`bool`类型，判断`s1`和`s2`的相等性。若`s1`和`s2`长度相同且其中所含的字符在位置上及值上都完全相同，则返回`true`，否则返回`false` |
| `<`<br />`<=`<br />`>`<br />`>=` | 返回`bool`类型，利用字符在字典中的顺序进行比较，且对字母的大小写敏感。<br />1. 若两个`string`对象的长度不同，而且较短的`string`对象的每个字符都与较长`string`对象对应位置上的字符相同，则较短的`string`对象小于较长`string`对象<br />2. 如果两个`string`对象在某些对应的位置上不一致，则`string`对象比较的结果是第一对相异字符比较的结果：<br />&ensp;&ensp;&ensp;&ensp;(1) 所有小写字母都比大写字母大<br />&ensp;&ensp;&ensp;&ensp;(2) 在小写字母或大写字母中，排序在后的更大 |



# 五. 处理字符

## 1. 字符处理函数

下标列出了所有针对单个字符的函数：

- `c`是一个字符

| 函数          | 效果                                                         |
| ------------- | ------------------------------------------------------------ |
| `isalnum(c)`  | 返回`bool`值，当`c`是字母或数字时为真                        |
| `isalpha(c)`  | 返回`bool`值，当`c`是字母时为真                              |
| `iscntrl(c)`  | 返回`bool`值，当`c`是控制字符时为真                          |
| `isdigit(c)`  | 返回`bool`值，当`c`是数字时为真                              |
| `isgraph(c)`  | 返回`bool`值，当`c`不是空格但是可打印时为真                  |
| `islower(c)`  | 返回`bool`值，当`c`是小写字母时为真                          |
| `isprint(c)`  | 返回`bool`值，当`c`是可打印字符时为真（即`c`是空格或`c`具有可视形式） |
| `ispunct(c)`  | 返回`bool`值，当`c`是标点符号时为真（即`c`不是控制字符、数字、字母、可打印空白中的一种） |
| `isspace(c)`  | 返回`bool`值，当`c`是空白时为真（即`c`是空格、横向制表符、纵向制表符、回车符、换行符、进纸符中的一种） |
| `isupper(c)`  | 返回`bool`值，当`c`是大写字母时为真                          |
| `isxdigit(c)` | 返回`bool`值，当`c`是十六进制数字时为真                      |
| `tolower(c)`  | 操作：若`c`是大写字母，输出对应的小写字母；否则原样输出`c`   |
| `toupper(c)`  | 操作：若`c`是小写字母，输出对应的大写字母；否则原样输出`c`   |



## 2. 访问每个字符

遍历访问每个字符的方式有几种，其中一种是通过下标进行，该方法还可以对字符串的字符进行随机访问，由于与C语言类似，故不进行介绍。另外两种方法分别是**范围for**循环和**迭代器**

### 1) 范围for循环

```c++
string str("some string");
for (auto c : str) {
    cout << c << endl;
}
```

**注意**：

1. 当不需要对字符串中字符进行更改时，循环控制变量使用拷贝形式，即使更改`c`也不会改变字符串的内容
2. 当需要对字符串中字符进行更改时，循环控制变量使用引用形式，此时可以改变字符串的内容
3. 若不确定序列对象的元素类型，可以使用`auto`声明循环控制变量



### 2）迭代器

```c++
string str("some string");
for (auto beg = str.begin(), end = str.end(); beg != end; beg++) {
	cout << *beg << endl;
}
```

