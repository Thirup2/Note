# 一. 经典 C 语言程序

```c
/* Hello World 程序 */
#include <stdio.h>
int main(void)
{
    printf("Hello World!\n");
    
    return 0;
}
```



# 二. 示例分析

## 1. 空白

首先注意到程序中有很多空白：将程序的不同部分分隔开的空行；语句前用于缩进的制表符。

这些空白不构成 C 语言的语法要求（有些是必须的，比如 `int` 和 `main` 之间的空格，称为函数返回类型和函数名之间的空格。当然，还有很多，这些空白不限长度但必须要有），通常在程序中使用这些空白是为了让程序看起来更清晰，看下面这个不包含任何非必须空白的程序就清楚了：

```c
#include <stdio.h>
int main(void){printf("Hello World!\n");return 0;}
```

这样一个比较短的程序还是很容易看懂的，但是如果一个程序比较长，像这样没有空白进行内容组织的程序读起来就比较困难了。

前面说空白不构成 C 语言的语法要求，如果所有语句放在同一行中，C 语言如何区分不同语句呢？答案就是分号，一个分号通常就表示一条语句的结束（代码块除外，一个代码块由两个花括号括起来，整个代码块看作一条语句也被称为复合语句，花括号后不带分号）。



## 2. 注释

注释是提供给他人或自己阅读的文字，但注释并不是机器识别的内容，编译器在编译时会自动跳过注释内容。

注释即使用`/*` 和 `*/` 包起来的内容，这些内容可跨多行，属于 C 语言原生的注释风格，使用这种风格则需要注意在注释内容中不要包含 `*/` 字符，否则后面部分的注释内容将在语法上不再构成注释内容。

另外一种风格是从 C++ 而来的，即以 `//` 开头的后面的一整行内容都表示是注释，需要注意的是，该风格的注释只有一行内容。



## 3. 预处理指令

上述程序中的预处理指令就只有：`#include <stdio.h>` 这一条，其他的预处理指令还有：

`#define` 指令，`#if` 系列指令等。

它们的功能分别是：

- `#include` 将后面所跟的文件名中的内容全部复制粘贴到该指令所在的位置
- `#define` 首先会定义一个宏的名字和它的值，预处理器会将程序中所有用到这个宏的名字替换为宏的值
- `#if` 系列指令主要作用在根据条件编译上


## 4. main 函数

一个函数定义通常由两部分组成：函数签名 和 函数定义

在上述程序中：`int main(void)` 就是一个函数签名，其中 `int` 表示这个函数的返回值，`main` 表示函数的名字，`()` 中的内容就表示函数的参数个数和类型，`void`表示无参数。也就是说，一个函数签名应该由三部分构成：函数返回类型、函数名、函数参数列表。

如果定义一个函数，那么就在函数签名后面添加 `{}`，在 `{}` 内部就是该函数会执行的内容，也叫做函数体。

`main` 函数是整个程序执行的起点，每个 C 程序都必须有一个 `main` 函数（请注意此处的 C 程序的含义，这里的 C 程序表示编译之后可以生成一个可执行程序的 C 语言源代码）

`main` 函数的返回值必须是`int`类型，用于返回程序退出时的状态；程序的参数可以为空，或者接受命令行参数（后续内容），即可接受的`main`函数只能是下面两种：

```c
int main(int argc, char *argv[]) {...}
int main(void) {...}
```

不能是任何其他签名。其中 `void` 可以省略。

> **C99**：
>
> 在 C90 `main` 函数的 `void` 可以省略，即写成：
>
> ```c
> int main() {...}
> ```
>
> 的形式。
>
> 但 C99 标准只定义了前面的两种函数原型。
>
> 但实际上即使使用后续的标准也可以省略`main`函数的`void`，但这主要是编译器的选择，要想写出永远不出会出现编译错误的代码，就严格使用标准语法。



## 5. printf 函数

第一条语句调用了一个标准库函数`printf`，该函数在标准库`stdio.h`中，由于我们前面包含了该库，所以我们就可以使用其中的函数。

本例中的`printf`函数只使用了其一个最简单的用法，即单纯打印一个字符串，用一对`"`括起来的内容包括`"`表示一个字符串。

另外`\n`是一个转义字符，表示换行。



## 6. return 语句

函数中的 return 语句用于返回一个值，同时把控制交给调用该函数的语句，同时函数返回的值也就是调用该函数时语句中调用函数部分的值。

在`main`函数的`return`语句表示程序的结束，即控制权交给调用该程序的程序，通常是终端程序，同时终端程序会得到`main`函数的返回值，用于表示程序退出时的状态，对于`main`函数来说，返回 0 通常表示程序正常执行。

> **C99**：
>
> 在 C90 中，标准要求`main`函数必须有`return`语句。
>
> 而在 C99 标准下，如果没有写`return`语句，默认会添加`return 0`



# 三. 编译程序

使用 IDE 时，可以通过 IDE 的各种功能便利地对程序进行编译运行以及调试。所以此处主要介绍使用命令行的编译运行方式：

当我们写好程序之后，打开终端，使用`gcc`命令对程序进行编译，如：

```bash
gcc hello.c
```

**注意**：如果终端的工作目录和`hello.c`所在目录不同，则需要指明`hello.c`所在的位置。

上面的指令将对`hello.c`进行编译，生成一个默认名称的可执行程序，在 Windows 下是`a.exe`，在 Linux 下是`a.out`

像下面这样就可以执行该程序：

```bash
./a.out
```

另外，如果想要自定义生成的程序名，可以使用下面的命令：

```bash
gcc hello.c -o hello
```

其中`-o`是`gcc`编译器的一个选项，表示`-o`后面的字符串就是需要生成的程序的名字，该指令执行之后将会生成一个`hello.exe`或者`hello`的可执行程序，按照同样的方法可以执行该程序。



