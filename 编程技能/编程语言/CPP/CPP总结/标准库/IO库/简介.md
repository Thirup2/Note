# 一. 标准 IO 库

标准 IO 库即`<iostream>`库，它包含两个基础类型：**istream** 和 **ostream**，前者是标准输入类型，后者是标准输出类型，也可以称作输入流和输出流。一个流就是一个字符序列，是从 IO 设备读出或写入 IO 设备的。术语 “流”（stream）想要表达的是，随着时间的推移，字符是顺序生成或消耗的（类似于队列结构）。

对于标准 IO 库的两个类型`istream`和`ostream`，我们一般无法使用它们来创建相应类型的对象，因为它们的对象都已经创建好了。但这两个类型对我们来说也是可见的，主要是为了用于函数参数传递以及函数返回。

标准 IO 库已经创建好的对象有：

- `cin`：`istream`类型对象，用于标准输入，通常指向键盘
- `cout`：`ostream`类型对象，用于标准输出，通常指向屏幕
- `cerr`：`ostream`类型对象，用于标准错误，通常指向屏幕
- `clog`：`ostream`类型对象，用于输出程序运行时的一般性信息

标准 IO 库的对象指向的硬件都是可以重定向的，重定向规则根据终端不同而不同，如 Linux 的重定向规则就两个符号：`>`（重定向标准输出，后跟重定向的目标）和`<`（重定向标准输入，后跟重定向的目标）

## 1. 输出操作

我们通过`<<`运算符来将内容写入到`ostream`类型对象，然后`ostream`对象将内容输出到其绑定的对象，以`cout`为例：

```c++
std::cout << "Enter two numbers:" << std::endl;
```

该语句首先将`"Enter two numbers:"`写入到`std::cout`中，然后`std::cout`将其内容输出到其绑定的对象（一般是屏幕）。上例中`std::endl`是一个被称作**操作符**（manipulator）的特殊值。写入`endl`的效果是：结束当前行，并将与设备关联的**缓冲区**（buffer）中的内容刷到设备中。缓冲刷新操作可以保证到目前为止程序所产生的所有输出都真正写入到输出流中，而不是仅停留在内存中等待写入流。

另外，`<<`运算符的结合顺序是从左到右，其运算的结果是返回左侧操作对象（输出操作是输出语句的副作用）。有了这个条件，我们就可以在一条输出语句中写出多个`<<`运算符，这些运算符从左边第一个开始执行，其操作结果是将`<<`右侧的内容写入到`std::cout`中，然后返回`std::cout`，然后再执行第二个`<<`运算符，其左侧同样是`std::cout`，所以可以继续写入后面的内容。最后输出到`std::endl`时，添加换行符到`std::cout`中，然后将`std::cout`输出到其绑定的设备上。



## 2. 输入操作

我们通过`>>`运算符首先将内容从`istream`所绑定的对象中写入到这个`istream`中，然后从这个`istream`将内容写入到`>>`右侧的对象中，以`cin`为例：

```c++
int v1 = 0, v2 = 0;
std::cin >> v1 >> v2;
```

该操作的具体操作如下：我们首先通过键盘输入一些字符，然后按下回车键，我们输入的内容首先被按顺序写入到`std::cin`中，然后按照先后顺序将`std::cin`中的数据依次写入到`v1`和`v2`中。

`>>`运算符的结合顺序也是从左到右，且运算结果是返回左侧运算对象（输入操作是输入语句的副作用）。所以，和输出操作相同，输入语句也可以在一条语句中写出多个`>>`运算符而不会产生错误。