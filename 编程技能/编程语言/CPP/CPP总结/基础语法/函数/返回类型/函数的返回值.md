# 一. 无返回值函数

没有返回值的`return`语句只能用在返回类型是`void`的函数中。返回`void`的函数如果没有`return`语句，则会在函数的最后**隐式地执行**`return`。

在无返回值函数中使用`return`语句通常是想在它的中间位置提前退出，类似于`break`的用法。



# 二. 有返回值函数

有返回值的`return`语句一般用在有返回值函数中，但也可以用在无返回值函数中，如果用于后者，那么返回的必须是另一个返回`void`的函数。

强行令`void`函数返回其他类型的表达式将产生编译错误。

另外，在有返回值函数中，`return`语句返回值的类型必须与函数返回类型相同，或者能隐式地转换成函数的返回类型。

另外，在有返回值函数中，`return`语句是必须的，并且程序应该保证在任何情况下都能够返回一个值。

****

**值的返回方式**：

返回一个值的方式和初始化一个变量或形参的方式完全一样：返回的值就相当于一个初始值，而函数本身相当于一个变量，返回类型就是它的类型，当函数返回值后，这个值就用来初始化该类型的函数。

从宏观上来看，当函数用在表达式中时，函数的返回值就是这个函数调用的值，其类型就是函数的返回类型。

特别的，如果函数返回一个引用，那么这个函数调用将会得到一个左值。

****

**不要返回局部对象的引用或指针**：

函数完成后，它所占用的存储空间也随之被释放掉。因此函数终止意味着局部变量的引用将指向不再有效的内存区域，所以返回局部变量的引用或指针的行为将导致错误。在被调函数中看上去返回的是一个有意义的值，但对于调用函数来说，得到的是一个垃圾值。

实际上，在程序运行时，会得到一个运行时堆栈，其中栈用于保存函数调用的层次以及局部变量等信息，而堆用于静态变量和动态分配的对象，所以如果要在函数中定义一个变量并返回该值，要么定义一个静态变量，要么在函数中使用动态分配来创建对象。

****

**返回类类型的函数及成员访问**：

如果有一个返回类类型的函数，那么这个函数调用将会返回一个类类型对象，我们可以对该函数使用成员访问运算符来访问类的成员以及调用成员函数。

如：

```c++
auto sz = shorterString(s1, s2).size();
```

****

**列表初始化返回值**：

C++ 规定，可以返回**花括号包围的值的列表**。类似于其他返回结果。

返回一个列表的用法可以用在能够使用列表初始化的类型。

如果列表为空，函数调用这个临时量执行值初始化；否则，返回的值由函数的返回类型决定。

如果函数返回的是内置类型，则花括号包围的列表最多包含一个值，而且该值所占空间不应该大于目标类型的空间（和使用列表初始化初始化内置类型一样，不允许信息的丢失）。如果函数返回的是类类型，由类本身定义初始值如何使用。

****

**main函数的返回值**：

`main`函数的返回类型首先必须是`int`类型，但`main`函数可以省略`return`语句。

如果控制到达了`main`函数的结尾处而且没有`return`语句，编译器将隐式地插入一条返回 0 的`return`语句。

`main`函数的返回值可以看作是状态指示器：返回 0 表示执行成功，返回其他值表示执行失败，其中非 0 值的具体含义依机器而定