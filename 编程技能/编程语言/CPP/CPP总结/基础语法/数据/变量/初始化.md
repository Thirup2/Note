# 一. 简介

当变量在创建时获得了一个特定的值，我们说这个对象被**初始化**（initialized）了。用于初始化变量的值可以是任意复杂的表达式，表达式的值就是该变量的**初始值**。

当一次定义了两个或多个变量时，对象的名字也就马上可以使用了，因此在同一条定义语句中，可以用先定义的变量值去初始化后定义的其他变量，如：

```c++
double price = 109.99, discount = price * 0.16;
```

**注意**：初始化并非赋值。初始化的含义是创建变量时赋予其一个初始值，而赋值的含义是把对象的当前值擦除，而以一个新值来替代。



# 二. 初始化方式

## 1. 默认初始化

**发生情形**：

- 当不使用任何初始化器（`=`、`()`和`{}`中的任意一种）而创建具有自动、静态或线程局部存储期的变量时

**语法**：

```C++
Type 对象;
```

**效果**：

当执行默认初始化时，将为创建的对象提供一个默认初始值。

- 如果是内置类型的变量被默认初始化，该默认值由定义的位置决定：定义于任何函数之外的变量被初始化为 0（零初始化）；定义在函数体内部的内置类型变量将**不被初始化**，它的值是未定义的，可能是垃圾值。
- 对于类类型来说，它是否允许默认初始化以及默认初始化时的操作都由各个类各自决定。具体的表现是，如果有默认构造函数，将调用该默认构造函数。



## 2. 值初始化

**发生情形**：

- 当以空的圆括号对或花括号对组成的初始化器创建**无名临时对象**时
- 当使用以空的花括号对组成的初始化器创建**具名对象**时

**语法**：

```c++
Type();
Type{};
Type 对象{};
```

**效果**：

- 对于内置类型（数组和引用之外），进行零初始化
- 对于数组类型，对数组的每个元素进行值初始化

**注意**：

- 对于`Type 对象();`并不是一个值初始化语句，而是声明了一个函数



## 3. 直接初始化

**发生情形**：

- 以表达式或花括号初始化器列表的非空带括号列表初始化
- 以花括号环绕的单个初始化器初始化一个非类类型对象
- 用函数式转型或以带括号的表达式列表初始化纯右值临时量

**语法**：

```c++
Type 对象(实参);
Type 对象(实参1, 实参2, ...);
Type 对象{实参};	// 非类类型对象
Type(其他对象);
Type(实参1, 实参2, ...);
```

**效果**：

- 对于内置类型，直接初始化即用实参初始化对象
- 对于类类型，就根据参数数量和类型调用匹配的构造函数构造类对象

**注意**：

- 使用`{}`初始化器的初始化语句，同样被`{}`限制窄化转换



## 4. 拷贝初始化

**发生情形**：

- 当声明非引用类型的具名变量（自动、静态或线程局部），带有以等号后随一个表达式所构成的初始化器时
- 当按值传递参数到函数时
- 当从具有返回值的函数返回时

**语法**：

```c++
Type 对象 = 其他对象;
函数(其他对象);
return 其他对象;
```

**效果**：

- 对于内置类型，即将其他对象拷贝给待初始化对象



## 5. 列表初始化

**发生情形**：

- 直接列表初始化
  - 以花括号初始化器列表初始化具名变量
  - 以花括号初始化器列表初始化无名临时量
- 拷贝列表初始化
  - 以等号后的花括号初始化器列表初始化具名变量
  - 函数调用表达式中，以花括号初始化器列表为实参，以列表初始化对函数形参初始化
  - 在以花括号初始化器列表为返回表达式的`return`语句中，以列表初始化对返回的对象初始化

**语法**：

```c++
// 直接列表初始化
Type 对象{实参1, 实参2, ...};
Type{实参1, 实参2, ...};
// 拷贝列表初始化
Type 对象 = {实参1, 实参2, ...};
函数({实参1, 实参2, ...}){...};
return {实参1, 实参2, ...};
```

**效果**：

- 用列表初始化某个对象，通常是容器类型或数组

**注意**：

- 列表初始化限制**窄化转换**