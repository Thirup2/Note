# 一. 类型转换的发生情形

- 当在程序的某处使用了一种算术类型的值而其实所需的是另一种类型的值时
- 当表达式里既有有符号类型又有无符号类型，带符号类型会转换成无符号类型



# 二. 类型转换的转换行为

## 1. 算术类型间的类型转换

- 非布尔类型与布尔类型的转换
  - 非 0 $\longrightarrow$ 布尔：转换为`true`
  - 0 $\longrightarrow$ 布尔：转换为`false`
  - `true` $\longrightarrow$ 非布尔：转换为 1
  - `false` $\longrightarrow$ 非布尔：转换为 0
- 浮点类型与整数类型的转换
  - 浮点 $\longrightarrow$ 整数：只保留整数部分。如果整数部分大小超过目标整数类型大小可能产生截断。
  - 整数 $\longrightarrow$ 浮点：整数部分不变，小数部分记为 0。如果整数的二进制位数超过浮点类型的有效数字位数则可能损失精度。
- 无符号与有符号的转换
  - 有符号 $\longrightarrow$ 无符号：最终保存的数据是有符号值本身（非负数）或者加上该类型的可表示的数据个数（负数），如把 -32 (`signed char`) 转换为无符号则为 `-32 + 256 = 224`
  - 无符号 $\longrightarrow$ 有符号：若无符号数的数据在有符号数的范围内则直接保存，若无符号数的数据在有符号数的范围外则参考有符号数的溢出。
- 无符号与有符号的溢出
  - 无符号溢出：最终保存的数据是初始数据对无符号类型的大小取模，如把 256 赋给`unsigned char`则得到`256 % 255 = 1`
  - 有符号溢出：该结果是未定义的，程序可能继续工作、可能崩溃，也可能生成垃圾数据。

