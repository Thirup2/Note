# 一. 简介

在 x86-64 中，控制语句通过条件码和一系列相关指令实现。

首先条件码是客观存在的，一共四个条件码保存在条件码寄存器中，每种条件码只有是或否两种状态。而进行算术、逻辑以及移位操作（`leaq`操作除外）都会导致条件码发生改变，以及专用于设置条件码的 $CMP$ 和 $TEST$ 指令也会改变条件码。对于逻辑操作，进位标志和溢出标志会设置成 0；对于移位操作，进位标志将设置为最后一个被移出的位，而溢出标志设置为 0；$INC$ 和 $DEC$ 指令会设置溢出和零标志，但是不会改变进位标志。

而将这四个条件码进行组合运算之后就可以知道上一次的单操作数指令中操作数的符号或双操作数指令中操作数的大小关系。根据这个大小关系，我们可以根据判断某关系是否成立将一个字节设置为 0 或 1，也可以根据某关系成立与否跳转到程序的某个其他的部分，以及可以根据条件来传送数据。



# 二. 条件分支

## 1. 条件控制实现

- C 语言`if-else`语句的通用形式模板如下：

  ```c
  if (test-expr)
      then-statement;
  else
      else-statement;
  ```

- 只用 C 语言中的`goto`语句模拟的汇编语言如下：

  ```c
  	t = test-expr;
  	if (!t)
  	    goto false;
  	then-statement;
  	goto done;
  false:
  	else-statement;
  done:
  ```

  - 其中第一行代码就是汇编语言的 $TEST$ 指令，第二行和第三行的`if`语句就是汇编语言的 $JUMP$ 类的指令



## 2. 条件传送实现

# 三. 循环

## 1. do-while 循环

## 2. while 循环

## 3. for 循环

# 四. switch 语句