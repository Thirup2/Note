# 一. 定义

**2-3树**是这样的一棵多路查找树：其中的每一个结点都具有两个孩子（我们称它为2结点）或三个孩子（我们称它为3结点）。

一个2结点包含一个元素和两个孩子（或没有孩子）；

一个3结点包含一大一小两个元素和三个孩子（或没有孩子）。

**注意**：

- 2-3树中的结点如果包含孩子，那么其孩子个数一定与其结点前缀数相同，否则就不能有孩子。
- 对于2结点，其左子树中所有结点都比该2结点中元素小，其右子树中所有结点都比该2结点中元素大。
- 对于3结点，其左子树中所有结点都比该3结点中较小元素小，其中子树中所有结点都在该3结点中两元素之间，其右子树中所有结点都比该3结点中较大元素大。



# 二. 主要操作

## 1. 插入

对于2-3树的插入来说，与二叉排序树相同，插入操作一定是发生在叶子结点上。与二叉排序树不同的是，2-3树插入一个元素的过程有可能会对该树的其余结构产生连锁反应。

2-3树插入可分为以下三种情况：

1. 若插入结点为空，插入一个2结点即可
2. 若插入结点是一个2结点的叶子，则将2结点升级为3结点，然后根据插入元素与原2结点中的元素大小关系进行保存。
3. 若插入结点是一个3结点的叶子，由于3结点本身已经是2-3树的结点最大容量，因此就需要将其拆分，然后在原3结点中两个元素以及插入元素这三个元素中选择其一向上移动一层，若上一层也已经是3结点，则继续对其进行拆分，直到遇到某个2结点或根结点被拆分



## 2. 删除

对于2-3树的删除操作，也分为三种情况：

1. 所删除的元素位于一个3结点的叶子结点上，只需要在该结点处删除该元素即可，不会影响到整棵树的其他结点结构。
2. 所删除的元素位于一个2结点的叶子结点上，由于2结点只包含一个元素，删除之后，该结点将不存在，那么其双亲结点将不满足2结点或3结点的定义，所以应该分以下四种情形来处理：
   1. 被删除结点的双亲结点也是2结点，且拥有一个3结点的右孩子，这种情况下，将该2结点删除，然后将其双亲结点为根的这棵子树进行左旋即可。如果删除的是右孩子，其左孩子是一个3结点，则进行右旋。
   2. 被删除结点的双亲结点是2结点，其另外一个孩子也是2结点，此时找到一个这另外一个孩子的元素的直接后继，让这个2结点变成3结点，然后用这个直接后继的直接后继去替代这个直接后继，以此类推。替换完成之后，就可以按照第1中方法进行旋转了。
   3. 被删除结点的双亲是一个3结点，那么将该3结点拆分为两个2结点，然后其中一个2结点与其子树中的一个2结点合并为3结点，需要注意的是要保持树的顺序。
   4. 当前树是一个满二叉树，此时就需要减少该满二叉树的层数，将一些结点合并为3结点。
3. 所删除的元素位于非叶子的分支结点，此时我们需要用该树中序遍历得到的一个序列来找到被删除结点的直接前驱或直接后继，考虑让它们来补位即可。
