# 一. 定义

**B树**(B-Tree)是一种平衡的多路查找树，2-3树和2-3-4树都是B树的特例。

结点最大的孩子数目称为B树的**阶**(order)，即2-3树是3阶B树，2-3-4树是4阶B树。



# 二. 属性

一个$$m$$阶的B树具有如下属性：

- 如果根结点不是叶结点，则其至少有两棵子树。
- 每一个非根的分支结点都有$$k-1$$个元素和$$k$$个孩子，其中$$[m/2]\leqslant k\leqslant m$$，其中$$[m/2]$$表示不小于$$m/2$$的最小整数。每一个叶子结点$$n$$都有$$k-1$$个元素，其中$$[m/2]\leqslant k\leqslant m$$。
- 所有叶子结点都位于同一层次
- 所有分支结点包含下列信息数据($$n$$，$$A_0$$，$$K_1$$，$$A_1$$，$$K_2$$，$$A_2$$，...，$$K_n$$，$$A_n$$)，其中：$$K_i(i=1$$，$$2$$，...，$$n)$$为关键字，且$$K_i<K_{i+1}(i=1$$，$$2$$，...，$$n-1)$$；$$A_i(i=0$$，$$2$$，...，$$n)$$为指向子树根结点的指针，且指针$$A_{i-1}$$所指子树中所有结点的关键字均小于$$K_i$$，$$n([m/2]-1\leqslant n\leqslant m-1)$$为关键字的个数（或$$n+1$$为子树的个数）。



# 三. 对效率的提升

我们的外存（如硬盘），是将所有的信息分割成相等大小的页面，每次硬盘读写的都是一个或多个完整的页面，对于一个硬盘来说，一页的长度可能是21~214B。

在一个典型的B树应用中，要处理的硬盘数据量很大，因此无法一次全部装入内存，所以我们对B树进行调整，使得B树的阶数（或结点的元素）与硬盘存储的页面大小相匹配。比如说一棵B树的阶为1001（即1个结点包含1000个关键字），高度为2，它就可以存储超过10亿个关键字，我们只要让根结点持久地保留在内存中，那么在这棵树上，寻找某一个关键字至多需要两次硬盘的读取即可。

对于$$n$$个关键字的$$m$$阶B树，最多需要查找的次数是：
$$
k\leqslant log_{[{m\over 2}]} ({n+1\over 2})+1
$$
