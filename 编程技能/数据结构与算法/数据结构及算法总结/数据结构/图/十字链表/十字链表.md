# 一. 引入

在**邻接表**中可以很好地实现无向图，但是对于有向图，就只能特化地实现存储出边表或入边表，想要根据一个邻接表同时方便的查找一个顶点的出边和入边也可以实现，即按照我实现的邻接表一样，在每个顶点结点中设置两条链表，一条出边表，一条入边表。但是其缺陷也是明显的，因为在出边表中，存储了所有以该表头为顶点的出边，每一条边涉及到两个对象，一个弧头，一个弧尾，很明显，对于某个结点的出边也是其对应的另一个结点的入边，可是在邻接表的实现中，每个顶点都设立了两个链表来分别存储，很显然这是很浪费空间的。



# 二. 定义

首先还是先考虑一个邻接表：首先是一个顶点数组，用以保存所有的顶点，在顶点中有一个出边表头，用于连接一个出边表。

出边表链表中每个结点有两个元素，一个数据域用于保存以表头为弧尾的弧的弧头的下标，然后一个指针域作为链连接下一个以表头为弧尾的弧的弧头的结点。

有了这样一个邻接表，再思考这样一个问题，一条弧对于其所关联的两个顶点而言，对弧尾来说是出边，对弧头来说则是入边，刚刚实现的邻接表是一个出边表，其后续跟的每一个结点对于当前链来说是出边，对于出边表中所保存的下标来说都是一条入边，其弧尾即为链表头的顶点。

所以如下来实现：首先在顶点元素中再添加一个指针域作为入边表的头，然后同样连接一个链表，每个结点保存以表头为弧头的所有弧的弧尾的顶点对应的下标。那么怎么将这个入边表链起来呢？可以跟邻接表的实现一样，添加一条新的入边表，但上面说过了浪费空间。

刚刚说过了，在出边表中，一条弧对于其表头是出边，对于结点中保存的下标对应的顶点来说是入边，所以每一个顶点的入边表的表头只需要将所有出边是该顶点的所有结点连接起来就行了。

还有一个问题，如何根据这个入边表找到所有的弧尾？每一个结点都只保存了以表头为顶点的所有出边的弧头，却不知道弧的弧尾，除非做一个双向链表逆遍历。当然更简单的方式是在每一个结点中添加一个数据域，保存弧的弧尾的下标即可。可以想象，对于每一个结点的出边表来说，每一个结点的弧尾都应该是当前表头的下标。



# 三. 主要操作

其他的操作都与邻接表差不多，主要需要注意的一点是：在添加一条弧时，不仅需要添加为一个结点的出边，也需要添加为一个结点的入边。

其操作过程大概如下：

- 首先新建一个结点，设置好它的两个数据域，即弧尾和弧头的下标。
- 然后找到弧尾下标的元素，以头插法将该结点插入该出边表。
- 然后找到弧头下标的元素，同样以头插法将该结点插入该入边表。
